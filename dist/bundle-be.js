!function(e){function r(e){var r=require("./"+e+"."+o+".hot-update.js");!function(e,r){if(!b[e]||!m[e])return;for(var t in m[e]=!1,r)Object.prototype.hasOwnProperty.call(r,t)&&(f[t]=r[t]);0==--y&&0===g&&E()}(r.id,r.modules)}var t,n=!0,o="1022fd6f954ac9a72635",s={},i=[],c=[];function a(e){var r=A[e];if(!r)return I;var n=function(n){return r.hot.active?(A[n]?-1===A[n].parents.indexOf(e)&&A[n].parents.push(e):(i=[e],t=n),-1===r.children.indexOf(n)&&r.children.push(n)):(console.warn("[HMR] unexpected require("+n+") from disposed module "+e),i=[]),I(n)},o=function(e){return{configurable:!0,enumerable:!0,get:function(){return I[e]},set:function(r){I[e]=r}}};for(var s in I)Object.prototype.hasOwnProperty.call(I,s)&&"e"!==s&&"t"!==s&&Object.defineProperty(n,s,o(s));return n.e=function(e){return"ready"===l&&u("prepare"),g++,I.e(e).then(r,function(e){throw r(),e});function r(){g--,"prepare"===l&&(w[e]||_(e),0===g&&0===y&&E())}},n.t=function(e,r){return 1&r&&(e=n(e)),I.t(e,-2&r)},n}var d=[],l="idle";function u(e){l=e;for(var r=0;r<d.length;r++)d[r].call(null,e)}var p,f,h,v,y=0,g=0,w={},m={},b={};function x(e){return+e+""===e?+e:e}function O(e){if("idle"!==l)throw new Error("check() is only allowed in idle status");return n=e,u("check"),function(){try{var e=require("./"+o+".hot-update.json")}catch(e){return Promise.resolve()}return Promise.resolve(e)}().then(function(e){if(!e)return u(P()?"ready":"idle"),null;m={},w={},b=e.c,h=e.h,u("prepare");var r=new Promise(function(e,r){p={resolve:e,reject:r}});f={};return _(0),"prepare"===l&&0===g&&0===y&&E(),r})}function _(e){b[e]?(m[e]=!0,y++,r(e)):w[e]=!0}function E(){u("ready");var e=p;if(p=null,e)if(n)Promise.resolve().then(function(){return j(n)}).then(function(r){e.resolve(r)},function(r){e.reject(r)});else{var r=[];for(var t in f)Object.prototype.hasOwnProperty.call(f,t)&&r.push(x(t));e.resolve(r)}}function j(r){if("ready"!==l)throw new Error("apply() is only allowed in ready status");return function r(n){P();var c;var a;var d;var l;var p;function y(e){for(var r=[e],t={},n=r.map(function(e){return{chain:[e],id:e}});n.length>0;){var o=n.pop(),s=o.id,i=o.chain;if((l=A[s])&&(!l.hot._selfAccepted||l.hot._selfInvalidated)){if(l.hot._selfDeclined)return{type:"self-declined",chain:i,moduleId:s};if(l.hot._main)return{type:"unaccepted",chain:i,moduleId:s};for(var c=0;c<l.parents.length;c++){var a=l.parents[c],d=A[a];if(d){if(d.hot._declinedDependencies[s])return{type:"declined",chain:i.concat([a]),moduleId:s,parentId:a};-1===r.indexOf(a)&&(d.hot._acceptedDependencies[s]?(t[a]||(t[a]=[]),g(t[a],[s])):(delete t[a],r.push(a),n.push({chain:i.concat([a]),id:a})))}}}}return{type:"accepted",moduleId:e,outdatedModules:r,outdatedDependencies:t}}function g(e,r){for(var t=0;t<r.length;t++){var n=r[t];-1===e.indexOf(n)&&e.push(n)}}var w={};var m=[];var O={};var _=function(){console.warn("[HMR] unexpected require("+j.moduleId+") to disposed module")};for(var E in f)if(Object.prototype.hasOwnProperty.call(f,E)){var j;p=x(E);var D=!1,k=!1,q=!1,H="";switch((j=f[E]?y(p):{type:"disposed",moduleId:E}).chain&&(H="\nUpdate propagation: "+j.chain.join(" -> ")),j.type){case"self-declined":n.onDeclined&&n.onDeclined(j),n.ignoreDeclined||(D=new Error("Aborted because of self decline: "+j.moduleId+H));break;case"declined":n.onDeclined&&n.onDeclined(j),n.ignoreDeclined||(D=new Error("Aborted because of declined dependency: "+j.moduleId+" in "+j.parentId+H));break;case"unaccepted":n.onUnaccepted&&n.onUnaccepted(j),n.ignoreUnaccepted||(D=new Error("Aborted because "+p+" is not accepted"+H));break;case"accepted":n.onAccepted&&n.onAccepted(j),k=!0;break;case"disposed":n.onDisposed&&n.onDisposed(j),q=!0;break;default:throw new Error("Unexception type "+j.type)}if(D)return u("abort"),Promise.reject(D);if(k)for(p in O[p]=f[p],g(m,j.outdatedModules),j.outdatedDependencies)Object.prototype.hasOwnProperty.call(j.outdatedDependencies,p)&&(w[p]||(w[p]=[]),g(w[p],j.outdatedDependencies[p]));q&&(g(m,[j.moduleId]),O[p]=_)}var S=[];for(a=0;a<m.length;a++)p=m[a],A[p]&&A[p].hot._selfAccepted&&O[p]!==_&&!A[p].hot._selfInvalidated&&S.push({module:p,parents:A[p].parents.slice(),errorHandler:A[p].hot._selfAccepted});u("dispose");Object.keys(b).forEach(function(e){!1===b[e]&&function(e){delete installedChunks[e]}(e)});var C;var T=m.slice();for(;T.length>0;)if(p=T.pop(),l=A[p]){var R={},M=l.hot._disposeHandlers;for(d=0;d<M.length;d++)(c=M[d])(R);for(s[p]=R,l.hot.active=!1,delete A[p],delete w[p],d=0;d<l.children.length;d++){var U=A[l.children[d]];U&&((C=U.parents.indexOf(p))>=0&&U.parents.splice(C,1))}}var L;var N;for(p in w)if(Object.prototype.hasOwnProperty.call(w,p)&&(l=A[p]))for(N=w[p],d=0;d<N.length;d++)L=N[d],(C=l.children.indexOf(L))>=0&&l.children.splice(C,1);u("apply");void 0!==h&&(o=h,h=void 0);f=void 0;for(p in O)Object.prototype.hasOwnProperty.call(O,p)&&(e[p]=O[p]);var J=null;for(p in w)if(Object.prototype.hasOwnProperty.call(w,p)&&(l=A[p])){N=w[p];var $=[];for(a=0;a<N.length;a++)if(L=N[a],c=l.hot._acceptedDependencies[L]){if(-1!==$.indexOf(c))continue;$.push(c)}for(a=0;a<$.length;a++){c=$[a];try{c(N)}catch(e){n.onErrored&&n.onErrored({type:"accept-errored",moduleId:p,dependencyId:N[a],error:e}),n.ignoreErrored||J||(J=e)}}}for(a=0;a<S.length;a++){var G=S[a];p=G.module,i=G.parents,t=p;try{I(p)}catch(e){if("function"==typeof G.errorHandler)try{G.errorHandler(e)}catch(r){n.onErrored&&n.onErrored({type:"self-accept-error-handler-errored",moduleId:p,error:r,originalError:e}),n.ignoreErrored||J||(J=r),J||(J=e)}else n.onErrored&&n.onErrored({type:"self-accept-errored",moduleId:p,error:e}),n.ignoreErrored||J||(J=e)}}if(J)return u("fail"),Promise.reject(J);if(v)return r(n).then(function(e){return m.forEach(function(r){e.indexOf(r)<0&&e.push(r)}),e});u("idle");return new Promise(function(e){e(m)})}(r=r||{})}function P(){if(v)return f||(f={}),v.forEach(D),v=void 0,!0}function D(r){Object.prototype.hasOwnProperty.call(f,r)||(f[r]=e[r])}var A={};function I(r){if(A[r])return A[r].exports;var n=A[r]={i:r,l:!1,exports:{},hot:function(r){var n={_acceptedDependencies:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_selfInvalidated:!1,_disposeHandlers:[],_main:t!==r,active:!0,accept:function(e,r){if(void 0===e)n._selfAccepted=!0;else if("function"==typeof e)n._selfAccepted=e;else if("object"==typeof e)for(var t=0;t<e.length;t++)n._acceptedDependencies[e[t]]=r||function(){};else n._acceptedDependencies[e]=r||function(){}},decline:function(e){if(void 0===e)n._selfDeclined=!0;else if("object"==typeof e)for(var r=0;r<e.length;r++)n._declinedDependencies[e[r]]=!0;else n._declinedDependencies[e]=!0},dispose:function(e){n._disposeHandlers.push(e)},addDisposeHandler:function(e){n._disposeHandlers.push(e)},removeDisposeHandler:function(e){var r=n._disposeHandlers.indexOf(e);r>=0&&n._disposeHandlers.splice(r,1)},invalidate:function(){switch(this._selfInvalidated=!0,l){case"idle":(f={})[r]=e[r],u("ready");break;case"ready":D(r);break;case"prepare":case"check":case"dispose":case"apply":(v=v||[]).push(r)}},check:O,apply:j,status:function(e){if(!e)return l;d.push(e)},addStatusHandler:function(e){d.push(e)},removeStatusHandler:function(e){var r=d.indexOf(e);r>=0&&d.splice(r,1)},data:s[r]};return t=void 0,n}(r),parents:(c=i,i=[],c),children:[]};return e[r].call(n.exports,n,n.exports,a(r)),n.l=!0,n.exports}I.m=e,I.c=A,I.d=function(e,r,t){I.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:t})},I.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},I.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return I.d(r,"a",r),r},I.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},I.p="/Users/saif/Desktop/hutaib/login/dist",I.w={},I.h=function(){return o},a(13)(I.s=13)}([function(e,r){e.exports=require("mariadb")},function(e,r){e.exports=require("password-hash")},function(e,r){e.exports=require("jsonwebtoken")},function(e,r){e.exports=require("passport-jwt")},function(e,r){e.exports=require("passport")},function(e,r){e.exports=require("body-parser")},function(e,r){e.exports=require("morgan")},function(e,r){e.exports=require("express")},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const n=t(7),o=t(6),s=t(5),i=t(4),c=t(3),a=t(2),d=t(1);let l=t(0);r.default=(new class{constructor(){this.jwtOptions={},this.ExtractJwt=c.ExtractJwt,this.JwtStrategy=c.ExtractJwt,this.newdata=[],this.jwtOptions.jwtFromRequest=this.ExtractJwt.fromAuthHeaderAsBearerToken(),this.jwtOptions.secretOrKey="SECRET",this.connectionString={host:"localhost",user:"root",password:"admin",database:"LOGIN",connectionLimit:5,port:"3306"},this.pool=l.createPool(this.connectionString),console.log(this.connectionString),this.express=n(),this.middleware(),this.routes()}ensureToken(e,r,t){const n=e.headers.authorization;if(void 0!==n){const r=n.split(" ")[1];e.token=r,t()}else r.sendStatus(403)}middleware(){this.express.use(function(e,r,t){r.header("Access-Control-Allow-Origin","*"),r.header("Access-Control-Allow-Headers","X-Requested-With,content-type"),r.header("Access-Control-Allow-Methods","GET, POST, OPTIONS, PUT, PATCH, DELETE"),t()}),this.express.use(o("dev")),this.express.use(s.json()),this.express.use(i.initialize()),this.express.use(s.urlencoded({extended:!1}))}routes(){let e=n.Router();e.post("/login",(e,r,t)=>{this.pool.getConnection().then(t=>{t.query("SELECT * FROM LOGIN.login WHERE username=?",[e.body.username]).then(n=>{const o=Array.isArray(n)?n.slice(0,-1):n;console.log(o,"data"),0==n.length?(t.end(),r.status(401).json({message:"Please signup, no email exists"})):d.verify(e.body.password,n[0].password)?(t.end(),console.log("SECRET"),n={data:n},r.json({sucessful:!0,token:a.sign(n,"SECRET")})):(t.end(),r.status(401).json({message:"Password/Email did not match"}))}).catch(e=>{t.end(),e&&(r.status(404).json({err:e}),console.log(e))})}).catch(e=>{e&&(r.status(404).json({err:e}),console.log(e))})}),e.post("/createUser",(e,r,t)=>{this.newdata=[],this.pool.getConnection().then(t=>{t.query("insert into LOGIN.login (last_name, first_name, email_address, password, username) VALUES (?, ?, ?, ?, ?)",[e.body.last_name,e.body.first_name,e.body.email_address,d.generate(e.body.password),e.body.username]).then(e=>{t.end(),r.json({message:"sucessful"})}).catch(e=>{t.end(),e&&r.status(404).json({err:e})})}).catch(e=>{e&&r.status(404).json({err:e})})}),e.get("/healthz",(e,r,t)=>{r.send("success")}),this.express.use("/",e)}}).express},function(e,r){e.exports=require("debug")},function(e,r){e.exports=require("http")},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const n=t(10),o=t(9),s=t(8);o("ts-express:server");const i=function(e){let r="string"==typeof e?parseInt(e,10):e;return isNaN(r)?e:r>=0&&r}(3004);s.default.set("port",i);const c=n.createServer(s.default);c.listen(i),c.on("error",function(e){if("listen"!==e.syscall)throw e;let r="string"==typeof i?"Pipe "+i:"Port "+i;switch(e.code){case"EACCES":console.error(`${r} requires elevated privileges`),process.exit(1);break;case"EADDRINUSE":console.error(`${r} is already in use`),process.exit(1);break;default:throw e}}),c.on("listening",function(){let e=c.address(),r="string"==typeof e?`pipe ${e}`:`port ${e.port}`;o(`Listening on ${r}`)})},function(e,r){e.exports=require("@babel/polyfill")},function(e,r,t){t(12),e.exports=t(11)}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwibWFyaWFkYlwiIiwid2VicGFjazovLy9leHRlcm5hbCBcInBhc3N3b3JkLWhhc2hcIiIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJqc29ud2VidG9rZW5cIiIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJwYXNzcG9ydC1qd3RcIiIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJwYXNzcG9ydFwiIiwid2VicGFjazovLy9leHRlcm5hbCBcImJvZHktcGFyc2VyXCIiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwibW9yZ2FuXCIiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwiZXhwcmVzc1wiIiwid2VicGFjazovLy8uL3NyYy9BcHAudHMiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwiZGVidWdcIiIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJodHRwXCIiLCJ3ZWJwYWNrOi8vLy4vc3JjL21haW4udHMiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwiQGJhYmVsL3BvbHlmaWxsXCIiXSwibmFtZXMiOlsiaG90RG93bmxvYWRVcGRhdGVDaHVuayIsImNodW5rSWQiLCJjaHVuayIsInJlcXVpcmUiLCJob3RDdXJyZW50SGFzaCIsIm1vcmVNb2R1bGVzIiwiaG90QXZhaWxhYmxlRmlsZXNNYXAiLCJob3RSZXF1ZXN0ZWRGaWxlc01hcCIsIm1vZHVsZUlkIiwiT2JqZWN0IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiaG90VXBkYXRlIiwiaG90V2FpdGluZ0ZpbGVzIiwiaG90Q2h1bmtzTG9hZGluZyIsImhvdFVwZGF0ZURvd25sb2FkZWQiLCJob3RBZGRVcGRhdGVDaHVuayIsImlkIiwibW9kdWxlcyIsImhvdEN1cnJlbnRDaGlsZE1vZHVsZSIsImhvdEFwcGx5T25VcGRhdGUiLCJob3RDdXJyZW50TW9kdWxlRGF0YSIsImhvdEN1cnJlbnRQYXJlbnRzIiwiaG90Q3VycmVudFBhcmVudHNUZW1wIiwiaG90Q3JlYXRlUmVxdWlyZSIsIm1lIiwiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJmbiIsInJlcXVlc3QiLCJob3QiLCJhY3RpdmUiLCJwYXJlbnRzIiwiaW5kZXhPZiIsInB1c2giLCJjaGlsZHJlbiIsImNvbnNvbGUiLCJ3YXJuIiwiT2JqZWN0RmFjdG9yeSIsIm5hbWUiLCJjb25maWd1cmFibGUiLCJlbnVtZXJhYmxlIiwiZ2V0Iiwic2V0IiwidmFsdWUiLCJkZWZpbmVQcm9wZXJ0eSIsImUiLCJob3RTdGF0dXMiLCJob3RTZXRTdGF0dXMiLCJ0aGVuIiwiZmluaXNoQ2h1bmtMb2FkaW5nIiwiZXJyIiwiaG90V2FpdGluZ0ZpbGVzTWFwIiwiaG90RW5zdXJlVXBkYXRlQ2h1bmsiLCJ0IiwibW9kZSIsImhvdFN0YXR1c0hhbmRsZXJzIiwibmV3U3RhdHVzIiwiaSIsImxlbmd0aCIsImhvdERlZmVycmVkIiwiaG90VXBkYXRlTmV3SGFzaCIsImhvdFF1ZXVlZEludmFsaWRhdGVkTW9kdWxlcyIsInRvTW9kdWxlSWQiLCJob3RDaGVjayIsImFwcGx5IiwiRXJyb3IiLCJ1cGRhdGUiLCJQcm9taXNlIiwicmVzb2x2ZSIsImhvdERvd25sb2FkTWFuaWZlc3QiLCJob3RBcHBseUludmFsaWRhdGVkTW9kdWxlcyIsImMiLCJoIiwicHJvbWlzZSIsInJlamVjdCIsImRlZmVycmVkIiwiaG90QXBwbHkiLCJyZXN1bHQiLCJvdXRkYXRlZE1vZHVsZXMiLCJvcHRpb25zIiwiaG90QXBwbHlJbnRlcm5hbCIsImNiIiwiaiIsIm1vZHVsZSIsImdldEFmZmVjdGVkU3R1ZmYiLCJ1cGRhdGVNb2R1bGVJZCIsIm91dGRhdGVkRGVwZW5kZW5jaWVzIiwicXVldWUiLCJtYXAiLCJjaGFpbiIsInF1ZXVlSXRlbSIsInBvcCIsIl9zZWxmQWNjZXB0ZWQiLCJfc2VsZkludmFsaWRhdGVkIiwiX3NlbGZEZWNsaW5lZCIsInR5cGUiLCJfbWFpbiIsInBhcmVudElkIiwicGFyZW50IiwiX2RlY2xpbmVkRGVwZW5kZW5jaWVzIiwiY29uY2F0IiwiX2FjY2VwdGVkRGVwZW5kZW5jaWVzIiwiYWRkQWxsVG9TZXQiLCJhIiwiYiIsIml0ZW0iLCJhcHBsaWVkVXBkYXRlIiwid2FyblVuZXhwZWN0ZWRSZXF1aXJlIiwiYWJvcnRFcnJvciIsImRvQXBwbHkiLCJkb0Rpc3Bvc2UiLCJjaGFpbkluZm8iLCJqb2luIiwib25EZWNsaW5lZCIsImlnbm9yZURlY2xpbmVkIiwib25VbmFjY2VwdGVkIiwiaWdub3JlVW5hY2NlcHRlZCIsIm9uQWNjZXB0ZWQiLCJvbkRpc3Bvc2VkIiwib3V0ZGF0ZWRTZWxmQWNjZXB0ZWRNb2R1bGVzIiwic2xpY2UiLCJlcnJvckhhbmRsZXIiLCJrZXlzIiwiZm9yRWFjaCIsImluc3RhbGxlZENodW5rcyIsImhvdERpc3Bvc2VDaHVuayIsImlkeCIsImRhdGEiLCJkaXNwb3NlSGFuZGxlcnMiLCJfZGlzcG9zZUhhbmRsZXJzIiwiY2hpbGQiLCJzcGxpY2UiLCJkZXBlbmRlbmN5IiwibW9kdWxlT3V0ZGF0ZWREZXBlbmRlbmNpZXMiLCJ1bmRlZmluZWQiLCJlcnJvciIsImNhbGxiYWNrcyIsIm9uRXJyb3JlZCIsImRlcGVuZGVuY3lJZCIsImlnbm9yZUVycm9yZWQiLCJlcnIyIiwib3JpZ2luYWxFcnJvciIsImxpc3QiLCJob3RBcHBseUludmFsaWRhdGVkTW9kdWxlIiwiZXhwb3J0cyIsImwiLCJhY2NlcHQiLCJkZXAiLCJjYWxsYmFjayIsImRlY2xpbmUiLCJkaXNwb3NlIiwiYWRkRGlzcG9zZUhhbmRsZXIiLCJyZW1vdmVEaXNwb3NlSGFuZGxlciIsImludmFsaWRhdGUiLCJ0aGlzIiwiY2hlY2siLCJzdGF0dXMiLCJhZGRTdGF0dXNIYW5kbGVyIiwicmVtb3ZlU3RhdHVzSGFuZGxlciIsImhvdENyZWF0ZU1vZHVsZSIsIm0iLCJkIiwiZ2V0dGVyIiwibyIsInIiLCJuIiwiX19lc01vZHVsZSIsIm9iamVjdCIsInByb3BlcnR5IiwicCIsInciLCJzIiwiZXhwcmVzcyIsImxvZ2dlciIsImJvZHlQYXJzZXIiLCJwYXNzcG9ydCIsInBhc3Nwb3J0SldUIiwiand0IiwicGFzc3dvcmRoYXNoIiwibWFyaWFkYiIsImRlZmF1bHQiLCJbb2JqZWN0IE9iamVjdF0iLCJqd3RPcHRpb25zIiwiRXh0cmFjdEp3dCIsIkp3dFN0cmF0ZWd5IiwibmV3ZGF0YSIsImp3dEZyb21SZXF1ZXN0IiwiZnJvbUF1dGhIZWFkZXJBc0JlYXJlclRva2VuIiwic2VjcmV0T3JLZXkiLCJjb25uZWN0aW9uU3RyaW5nIiwiaG9zdCIsInVzZXIiLCJwYXNzd29yZCIsImRhdGFiYXNlIiwiY29ubmVjdGlvbkxpbWl0IiwicG9ydCIsInBvb2wiLCJjcmVhdGVQb29sIiwibG9nIiwibWlkZGxld2FyZSIsInJvdXRlcyIsInJlcSIsInJlcyIsIm5leHQiLCJiZWFyZXJIZWFkZXIiLCJoZWFkZXJzIiwiYmVhcmVyVG9rZW4iLCJzcGxpdCIsInRva2VuIiwic2VuZFN0YXR1cyIsInVzZSIsImhlYWRlciIsImpzb24iLCJpbml0aWFsaXplIiwidXJsZW5jb2RlZCIsImV4dGVuZGVkIiwicm91dGVyIiwiUm91dGVyIiwicG9zdCIsImdldENvbm5lY3Rpb24iLCJjb25uIiwicXVlcnkiLCJib2R5IiwidXNlcm5hbWUiLCJjbGVhblJvd3MiLCJBcnJheSIsImlzQXJyYXkiLCJlbmQiLCJtZXNzYWdlIiwidmVyaWZ5Iiwic3VjZXNzZnVsIiwic2lnbiIsImNhdGNoIiwibGFzdF9uYW1lIiwiZmlyc3RfbmFtZSIsImVtYWlsX2FkZHJlc3MiLCJnZW5lcmF0ZSIsInNlbmQiLCJodHRwIiwiZGVidWciLCJBcHBfMSIsInZhbCIsInBhcnNlSW50IiwiaXNOYU4iLCJub3JtYWxpemVQb3J0Iiwic2VydmVyIiwiY3JlYXRlU2VydmVyIiwibGlzdGVuIiwib24iLCJzeXNjYWxsIiwiYmluZCIsImNvZGUiLCJwcm9jZXNzIiwiZXhpdCIsImFkZHIiLCJhZGRyZXNzIl0sIm1hcHBpbmdzIjoiYUFDQSxTQUFB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QSxHQUNBQSxFQVhBaUQsQ0FBQSxNQUNBSixFQUFBNUQsUUFBQTFJLElBQUEsT0FBQXlKLEdBQ0EsTUFBQWtELEVBQUFQLEVBQUFRLGFBQUFOLEVBQUE1RCxTQUNBaUUsRUFBQUUsT0FBQXBELEdBQ0FrRCxFQUFBRyxHQUFBLFFBV0EsU0FBQWpILEdBQ0EsY0FBQUEsRUFBQWtILFFBQ0EsTUFBQWxILEVBQ0EsSUFBQW1ILEVBQUEsaUJBQUF2RCxFQUFBLFFBQUFBLEVBQUEsUUFBQUEsRUFDQSxPQUFBNUQsRUFBQW9ILE1BQ0EsYUFDQXhOLFFBQUFvRyxTQUE2Qm1ILGtDQUM3QkUsUUFBQUMsS0FBQSxHQUNBLE1BQ0EsaUJBQ0ExTixRQUFBb0csU0FBNkJtSCx1QkFDN0JFLFFBQUFDLEtBQUEsR0FDQSxNQUNBLFFBQ0EsTUFBQXRILEtBeEJBOEcsRUFBQUcsR0FBQSxZQTJCQSxXQUNBLElBQUFNLEVBQUFULEVBQUFVLFVBQ0FMLEVBQUEsaUJBQUFJLFVBQW9EQSxZQUFpQkEsRUFBQTNELE9BQ3JFNEMsa0JBQTBCVyxzQkN6QzFCdkssRUFBQTZELFFBQUEvSSxRQUFBIiwiZmlsZSI6ImJ1bmRsZS1iZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFyc1xuIFx0ZnVuY3Rpb24gaG90RG93bmxvYWRVcGRhdGVDaHVuayhjaHVua0lkKSB7XG4gXHRcdHZhciBjaHVuayA9IHJlcXVpcmUoXCIuL1wiICsgXCJcIiArIGNodW5rSWQgKyBcIi5cIiArIGhvdEN1cnJlbnRIYXNoICsgXCIuaG90LXVwZGF0ZS5qc1wiKTtcbiBcdFx0aG90QWRkVXBkYXRlQ2h1bmsoY2h1bmsuaWQsIGNodW5rLm1vZHVsZXMpO1xuIFx0fVxuXG4gXHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW51c2VkLXZhcnNcbiBcdGZ1bmN0aW9uIGhvdERvd25sb2FkTWFuaWZlc3QoKSB7XG4gXHRcdHRyeSB7XG4gXHRcdFx0dmFyIHVwZGF0ZSA9IHJlcXVpcmUoXCIuL1wiICsgXCJcIiArIGhvdEN1cnJlbnRIYXNoICsgXCIuaG90LXVwZGF0ZS5qc29uXCIpO1xuIFx0XHR9IGNhdGNoIChlKSB7XG4gXHRcdFx0cmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuIFx0XHR9XG4gXHRcdHJldHVybiBQcm9taXNlLnJlc29sdmUodXBkYXRlKTtcbiBcdH1cblxuIFx0Ly9lc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW51c2VkLXZhcnNcbiBcdGZ1bmN0aW9uIGhvdERpc3Bvc2VDaHVuayhjaHVua0lkKSB7XG4gXHRcdGRlbGV0ZSBpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF07XG4gXHR9XG5cbiBcdHZhciBob3RBcHBseU9uVXBkYXRlID0gdHJ1ZTtcbiBcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFyc1xuIFx0dmFyIGhvdEN1cnJlbnRIYXNoID0gXCIxMDIyZmQ2Zjk1NGFjOWE3MjYzNVwiO1xuIFx0dmFyIGhvdFJlcXVlc3RUaW1lb3V0ID0gMTAwMDA7XG4gXHR2YXIgaG90Q3VycmVudE1vZHVsZURhdGEgPSB7fTtcbiBcdHZhciBob3RDdXJyZW50Q2hpbGRNb2R1bGU7XG4gXHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW51c2VkLXZhcnNcbiBcdHZhciBob3RDdXJyZW50UGFyZW50cyA9IFtdO1xuIFx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVudXNlZC12YXJzXG4gXHR2YXIgaG90Q3VycmVudFBhcmVudHNUZW1wID0gW107XG5cbiBcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFyc1xuIFx0ZnVuY3Rpb24gaG90Q3JlYXRlUmVxdWlyZShtb2R1bGVJZCkge1xuIFx0XHR2YXIgbWUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXTtcbiBcdFx0aWYgKCFtZSkgcmV0dXJuIF9fd2VicGFja19yZXF1aXJlX187XG4gXHRcdHZhciBmbiA9IGZ1bmN0aW9uKHJlcXVlc3QpIHtcbiBcdFx0XHRpZiAobWUuaG90LmFjdGl2ZSkge1xuIFx0XHRcdFx0aWYgKGluc3RhbGxlZE1vZHVsZXNbcmVxdWVzdF0pIHtcbiBcdFx0XHRcdFx0aWYgKGluc3RhbGxlZE1vZHVsZXNbcmVxdWVzdF0ucGFyZW50cy5pbmRleE9mKG1vZHVsZUlkKSA9PT0gLTEpIHtcbiBcdFx0XHRcdFx0XHRpbnN0YWxsZWRNb2R1bGVzW3JlcXVlc3RdLnBhcmVudHMucHVzaChtb2R1bGVJZCk7XG4gXHRcdFx0XHRcdH1cbiBcdFx0XHRcdH0gZWxzZSB7XG4gXHRcdFx0XHRcdGhvdEN1cnJlbnRQYXJlbnRzID0gW21vZHVsZUlkXTtcbiBcdFx0XHRcdFx0aG90Q3VycmVudENoaWxkTW9kdWxlID0gcmVxdWVzdDtcbiBcdFx0XHRcdH1cbiBcdFx0XHRcdGlmIChtZS5jaGlsZHJlbi5pbmRleE9mKHJlcXVlc3QpID09PSAtMSkge1xuIFx0XHRcdFx0XHRtZS5jaGlsZHJlbi5wdXNoKHJlcXVlc3QpO1xuIFx0XHRcdFx0fVxuIFx0XHRcdH0gZWxzZSB7XG4gXHRcdFx0XHRjb25zb2xlLndhcm4oXG4gXHRcdFx0XHRcdFwiW0hNUl0gdW5leHBlY3RlZCByZXF1aXJlKFwiICtcbiBcdFx0XHRcdFx0XHRyZXF1ZXN0ICtcbiBcdFx0XHRcdFx0XHRcIikgZnJvbSBkaXNwb3NlZCBtb2R1bGUgXCIgK1xuIFx0XHRcdFx0XHRcdG1vZHVsZUlkXG4gXHRcdFx0XHQpO1xuIFx0XHRcdFx0aG90Q3VycmVudFBhcmVudHMgPSBbXTtcbiBcdFx0XHR9XG4gXHRcdFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18ocmVxdWVzdCk7XG4gXHRcdH07XG4gXHRcdHZhciBPYmplY3RGYWN0b3J5ID0gZnVuY3Rpb24gT2JqZWN0RmFjdG9yeShuYW1lKSB7XG4gXHRcdFx0cmV0dXJuIHtcbiBcdFx0XHRcdGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiBcdFx0XHRcdGVudW1lcmFibGU6IHRydWUsXG4gXHRcdFx0XHRnZXQ6IGZ1bmN0aW9uKCkge1xuIFx0XHRcdFx0XHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfX1tuYW1lXTtcbiBcdFx0XHRcdH0sXG4gXHRcdFx0XHRzZXQ6IGZ1bmN0aW9uKHZhbHVlKSB7XG4gXHRcdFx0XHRcdF9fd2VicGFja19yZXF1aXJlX19bbmFtZV0gPSB2YWx1ZTtcbiBcdFx0XHRcdH1cbiBcdFx0XHR9O1xuIFx0XHR9O1xuIFx0XHRmb3IgKHZhciBuYW1lIGluIF9fd2VicGFja19yZXF1aXJlX18pIHtcbiBcdFx0XHRpZiAoXG4gXHRcdFx0XHRPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoX193ZWJwYWNrX3JlcXVpcmVfXywgbmFtZSkgJiZcbiBcdFx0XHRcdG5hbWUgIT09IFwiZVwiICYmXG4gXHRcdFx0XHRuYW1lICE9PSBcInRcIlxuIFx0XHRcdCkge1xuIFx0XHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGZuLCBuYW1lLCBPYmplY3RGYWN0b3J5KG5hbWUpKTtcbiBcdFx0XHR9XG4gXHRcdH1cbiBcdFx0Zm4uZSA9IGZ1bmN0aW9uKGNodW5rSWQpIHtcbiBcdFx0XHRpZiAoaG90U3RhdHVzID09PSBcInJlYWR5XCIpIGhvdFNldFN0YXR1cyhcInByZXBhcmVcIik7XG4gXHRcdFx0aG90Q2h1bmtzTG9hZGluZysrO1xuIFx0XHRcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fLmUoY2h1bmtJZCkudGhlbihmaW5pc2hDaHVua0xvYWRpbmcsIGZ1bmN0aW9uKGVycikge1xuIFx0XHRcdFx0ZmluaXNoQ2h1bmtMb2FkaW5nKCk7XG4gXHRcdFx0XHR0aHJvdyBlcnI7XG4gXHRcdFx0fSk7XG5cbiBcdFx0XHRmdW5jdGlvbiBmaW5pc2hDaHVua0xvYWRpbmcoKSB7XG4gXHRcdFx0XHRob3RDaHVua3NMb2FkaW5nLS07XG4gXHRcdFx0XHRpZiAoaG90U3RhdHVzID09PSBcInByZXBhcmVcIikge1xuIFx0XHRcdFx0XHRpZiAoIWhvdFdhaXRpbmdGaWxlc01hcFtjaHVua0lkXSkge1xuIFx0XHRcdFx0XHRcdGhvdEVuc3VyZVVwZGF0ZUNodW5rKGNodW5rSWQpO1xuIFx0XHRcdFx0XHR9XG4gXHRcdFx0XHRcdGlmIChob3RDaHVua3NMb2FkaW5nID09PSAwICYmIGhvdFdhaXRpbmdGaWxlcyA9PT0gMCkge1xuIFx0XHRcdFx0XHRcdGhvdFVwZGF0ZURvd25sb2FkZWQoKTtcbiBcdFx0XHRcdFx0fVxuIFx0XHRcdFx0fVxuIFx0XHRcdH1cbiBcdFx0fTtcbiBcdFx0Zm4udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdFx0aWYgKG1vZGUgJiAxKSB2YWx1ZSA9IGZuKHZhbHVlKTtcbiBcdFx0XHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXy50KHZhbHVlLCBtb2RlICYgfjEpO1xuIFx0XHR9O1xuIFx0XHRyZXR1cm4gZm47XG4gXHR9XG5cbiBcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFyc1xuIFx0ZnVuY3Rpb24gaG90Q3JlYXRlTW9kdWxlKG1vZHVsZUlkKSB7XG4gXHRcdHZhciBob3QgPSB7XG4gXHRcdFx0Ly8gcHJpdmF0ZSBzdHVmZlxuIFx0XHRcdF9hY2NlcHRlZERlcGVuZGVuY2llczoge30sXG4gXHRcdFx0X2RlY2xpbmVkRGVwZW5kZW5jaWVzOiB7fSxcbiBcdFx0XHRfc2VsZkFjY2VwdGVkOiBmYWxzZSxcbiBcdFx0XHRfc2VsZkRlY2xpbmVkOiBmYWxzZSxcbiBcdFx0XHRfc2VsZkludmFsaWRhdGVkOiBmYWxzZSxcbiBcdFx0XHRfZGlzcG9zZUhhbmRsZXJzOiBbXSxcbiBcdFx0XHRfbWFpbjogaG90Q3VycmVudENoaWxkTW9kdWxlICE9PSBtb2R1bGVJZCxcblxuIFx0XHRcdC8vIE1vZHVsZSBBUElcbiBcdFx0XHRhY3RpdmU6IHRydWUsXG4gXHRcdFx0YWNjZXB0OiBmdW5jdGlvbihkZXAsIGNhbGxiYWNrKSB7XG4gXHRcdFx0XHRpZiAoZGVwID09PSB1bmRlZmluZWQpIGhvdC5fc2VsZkFjY2VwdGVkID0gdHJ1ZTtcbiBcdFx0XHRcdGVsc2UgaWYgKHR5cGVvZiBkZXAgPT09IFwiZnVuY3Rpb25cIikgaG90Ll9zZWxmQWNjZXB0ZWQgPSBkZXA7XG4gXHRcdFx0XHRlbHNlIGlmICh0eXBlb2YgZGVwID09PSBcIm9iamVjdFwiKVxuIFx0XHRcdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGRlcC5sZW5ndGg7IGkrKylcbiBcdFx0XHRcdFx0XHRob3QuX2FjY2VwdGVkRGVwZW5kZW5jaWVzW2RlcFtpXV0gPSBjYWxsYmFjayB8fCBmdW5jdGlvbigpIHt9O1xuIFx0XHRcdFx0ZWxzZSBob3QuX2FjY2VwdGVkRGVwZW5kZW5jaWVzW2RlcF0gPSBjYWxsYmFjayB8fCBmdW5jdGlvbigpIHt9O1xuIFx0XHRcdH0sXG4gXHRcdFx0ZGVjbGluZTogZnVuY3Rpb24oZGVwKSB7XG4gXHRcdFx0XHRpZiAoZGVwID09PSB1bmRlZmluZWQpIGhvdC5fc2VsZkRlY2xpbmVkID0gdHJ1ZTtcbiBcdFx0XHRcdGVsc2UgaWYgKHR5cGVvZiBkZXAgPT09IFwib2JqZWN0XCIpXG4gXHRcdFx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgZGVwLmxlbmd0aDsgaSsrKVxuIFx0XHRcdFx0XHRcdGhvdC5fZGVjbGluZWREZXBlbmRlbmNpZXNbZGVwW2ldXSA9IHRydWU7XG4gXHRcdFx0XHRlbHNlIGhvdC5fZGVjbGluZWREZXBlbmRlbmNpZXNbZGVwXSA9IHRydWU7XG4gXHRcdFx0fSxcbiBcdFx0XHRkaXNwb3NlOiBmdW5jdGlvbihjYWxsYmFjaykge1xuIFx0XHRcdFx0aG90Ll9kaXNwb3NlSGFuZGxlcnMucHVzaChjYWxsYmFjayk7XG4gXHRcdFx0fSxcbiBcdFx0XHRhZGREaXNwb3NlSGFuZGxlcjogZnVuY3Rpb24oY2FsbGJhY2spIHtcbiBcdFx0XHRcdGhvdC5fZGlzcG9zZUhhbmRsZXJzLnB1c2goY2FsbGJhY2spO1xuIFx0XHRcdH0sXG4gXHRcdFx0cmVtb3ZlRGlzcG9zZUhhbmRsZXI6IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gXHRcdFx0XHR2YXIgaWR4ID0gaG90Ll9kaXNwb3NlSGFuZGxlcnMuaW5kZXhPZihjYWxsYmFjayk7XG4gXHRcdFx0XHRpZiAoaWR4ID49IDApIGhvdC5fZGlzcG9zZUhhbmRsZXJzLnNwbGljZShpZHgsIDEpO1xuIFx0XHRcdH0sXG4gXHRcdFx0aW52YWxpZGF0ZTogZnVuY3Rpb24oKSB7XG4gXHRcdFx0XHR0aGlzLl9zZWxmSW52YWxpZGF0ZWQgPSB0cnVlO1xuIFx0XHRcdFx0c3dpdGNoIChob3RTdGF0dXMpIHtcbiBcdFx0XHRcdFx0Y2FzZSBcImlkbGVcIjpcbiBcdFx0XHRcdFx0XHRob3RVcGRhdGUgPSB7fTtcbiBcdFx0XHRcdFx0XHRob3RVcGRhdGVbbW9kdWxlSWRdID0gbW9kdWxlc1ttb2R1bGVJZF07XG4gXHRcdFx0XHRcdFx0aG90U2V0U3RhdHVzKFwicmVhZHlcIik7XG4gXHRcdFx0XHRcdFx0YnJlYWs7XG4gXHRcdFx0XHRcdGNhc2UgXCJyZWFkeVwiOlxuIFx0XHRcdFx0XHRcdGhvdEFwcGx5SW52YWxpZGF0ZWRNb2R1bGUobW9kdWxlSWQpO1xuIFx0XHRcdFx0XHRcdGJyZWFrO1xuIFx0XHRcdFx0XHRjYXNlIFwicHJlcGFyZVwiOlxuIFx0XHRcdFx0XHRjYXNlIFwiY2hlY2tcIjpcbiBcdFx0XHRcdFx0Y2FzZSBcImRpc3Bvc2VcIjpcbiBcdFx0XHRcdFx0Y2FzZSBcImFwcGx5XCI6XG4gXHRcdFx0XHRcdFx0KGhvdFF1ZXVlZEludmFsaWRhdGVkTW9kdWxlcyA9XG4gXHRcdFx0XHRcdFx0XHRob3RRdWV1ZWRJbnZhbGlkYXRlZE1vZHVsZXMgfHwgW10pLnB1c2gobW9kdWxlSWQpO1xuIFx0XHRcdFx0XHRcdGJyZWFrO1xuIFx0XHRcdFx0XHRkZWZhdWx0OlxuIFx0XHRcdFx0XHRcdC8vIGlnbm9yZSByZXF1ZXN0cyBpbiBlcnJvciBzdGF0ZXNcbiBcdFx0XHRcdFx0XHRicmVhaztcbiBcdFx0XHRcdH1cbiBcdFx0XHR9LFxuXG4gXHRcdFx0Ly8gTWFuYWdlbWVudCBBUElcbiBcdFx0XHRjaGVjazogaG90Q2hlY2ssXG4gXHRcdFx0YXBwbHk6IGhvdEFwcGx5LFxuIFx0XHRcdHN0YXR1czogZnVuY3Rpb24obCkge1xuIFx0XHRcdFx0aWYgKCFsKSByZXR1cm4gaG90U3RhdHVzO1xuIFx0XHRcdFx0aG90U3RhdHVzSGFuZGxlcnMucHVzaChsKTtcbiBcdFx0XHR9LFxuIFx0XHRcdGFkZFN0YXR1c0hhbmRsZXI6IGZ1bmN0aW9uKGwpIHtcbiBcdFx0XHRcdGhvdFN0YXR1c0hhbmRsZXJzLnB1c2gobCk7XG4gXHRcdFx0fSxcbiBcdFx0XHRyZW1vdmVTdGF0dXNIYW5kbGVyOiBmdW5jdGlvbihsKSB7XG4gXHRcdFx0XHR2YXIgaWR4ID0gaG90U3RhdHVzSGFuZGxlcnMuaW5kZXhPZihsKTtcbiBcdFx0XHRcdGlmIChpZHggPj0gMCkgaG90U3RhdHVzSGFuZGxlcnMuc3BsaWNlKGlkeCwgMSk7XG4gXHRcdFx0fSxcblxuIFx0XHRcdC8vaW5oZXJpdCBmcm9tIHByZXZpb3VzIGRpc3Bvc2UgY2FsbFxuIFx0XHRcdGRhdGE6IGhvdEN1cnJlbnRNb2R1bGVEYXRhW21vZHVsZUlkXVxuIFx0XHR9O1xuIFx0XHRob3RDdXJyZW50Q2hpbGRNb2R1bGUgPSB1bmRlZmluZWQ7XG4gXHRcdHJldHVybiBob3Q7XG4gXHR9XG5cbiBcdHZhciBob3RTdGF0dXNIYW5kbGVycyA9IFtdO1xuIFx0dmFyIGhvdFN0YXR1cyA9IFwiaWRsZVwiO1xuXG4gXHRmdW5jdGlvbiBob3RTZXRTdGF0dXMobmV3U3RhdHVzKSB7XG4gXHRcdGhvdFN0YXR1cyA9IG5ld1N0YXR1cztcbiBcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBob3RTdGF0dXNIYW5kbGVycy5sZW5ndGg7IGkrKylcbiBcdFx0XHRob3RTdGF0dXNIYW5kbGVyc1tpXS5jYWxsKG51bGwsIG5ld1N0YXR1cyk7XG4gXHR9XG5cbiBcdC8vIHdoaWxlIGRvd25sb2FkaW5nXG4gXHR2YXIgaG90V2FpdGluZ0ZpbGVzID0gMDtcbiBcdHZhciBob3RDaHVua3NMb2FkaW5nID0gMDtcbiBcdHZhciBob3RXYWl0aW5nRmlsZXNNYXAgPSB7fTtcbiBcdHZhciBob3RSZXF1ZXN0ZWRGaWxlc01hcCA9IHt9O1xuIFx0dmFyIGhvdEF2YWlsYWJsZUZpbGVzTWFwID0ge307XG4gXHR2YXIgaG90RGVmZXJyZWQ7XG5cbiBcdC8vIFRoZSB1cGRhdGUgaW5mb1xuIFx0dmFyIGhvdFVwZGF0ZSwgaG90VXBkYXRlTmV3SGFzaCwgaG90UXVldWVkSW52YWxpZGF0ZWRNb2R1bGVzO1xuXG4gXHRmdW5jdGlvbiB0b01vZHVsZUlkKGlkKSB7XG4gXHRcdHZhciBpc051bWJlciA9ICtpZCArIFwiXCIgPT09IGlkO1xuIFx0XHRyZXR1cm4gaXNOdW1iZXIgPyAraWQgOiBpZDtcbiBcdH1cblxuIFx0ZnVuY3Rpb24gaG90Q2hlY2soYXBwbHkpIHtcbiBcdFx0aWYgKGhvdFN0YXR1cyAhPT0gXCJpZGxlXCIpIHtcbiBcdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJjaGVjaygpIGlzIG9ubHkgYWxsb3dlZCBpbiBpZGxlIHN0YXR1c1wiKTtcbiBcdFx0fVxuIFx0XHRob3RBcHBseU9uVXBkYXRlID0gYXBwbHk7XG4gXHRcdGhvdFNldFN0YXR1cyhcImNoZWNrXCIpO1xuIFx0XHRyZXR1cm4gaG90RG93bmxvYWRNYW5pZmVzdChob3RSZXF1ZXN0VGltZW91dCkudGhlbihmdW5jdGlvbih1cGRhdGUpIHtcbiBcdFx0XHRpZiAoIXVwZGF0ZSkge1xuIFx0XHRcdFx0aG90U2V0U3RhdHVzKGhvdEFwcGx5SW52YWxpZGF0ZWRNb2R1bGVzKCkgPyBcInJlYWR5XCIgOiBcImlkbGVcIik7XG4gXHRcdFx0XHRyZXR1cm4gbnVsbDtcbiBcdFx0XHR9XG4gXHRcdFx0aG90UmVxdWVzdGVkRmlsZXNNYXAgPSB7fTtcbiBcdFx0XHRob3RXYWl0aW5nRmlsZXNNYXAgPSB7fTtcbiBcdFx0XHRob3RBdmFpbGFibGVGaWxlc01hcCA9IHVwZGF0ZS5jO1xuIFx0XHRcdGhvdFVwZGF0ZU5ld0hhc2ggPSB1cGRhdGUuaDtcblxuIFx0XHRcdGhvdFNldFN0YXR1cyhcInByZXBhcmVcIik7XG4gXHRcdFx0dmFyIHByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiBcdFx0XHRcdGhvdERlZmVycmVkID0ge1xuIFx0XHRcdFx0XHRyZXNvbHZlOiByZXNvbHZlLFxuIFx0XHRcdFx0XHRyZWplY3Q6IHJlamVjdFxuIFx0XHRcdFx0fTtcbiBcdFx0XHR9KTtcbiBcdFx0XHRob3RVcGRhdGUgPSB7fTtcbiBcdFx0XHR2YXIgY2h1bmtJZCA9IDA7XG4gXHRcdFx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWxvbmUtYmxvY2tzXG4gXHRcdFx0e1xuIFx0XHRcdFx0aG90RW5zdXJlVXBkYXRlQ2h1bmsoY2h1bmtJZCk7XG4gXHRcdFx0fVxuIFx0XHRcdGlmIChcbiBcdFx0XHRcdGhvdFN0YXR1cyA9PT0gXCJwcmVwYXJlXCIgJiZcbiBcdFx0XHRcdGhvdENodW5rc0xvYWRpbmcgPT09IDAgJiZcbiBcdFx0XHRcdGhvdFdhaXRpbmdGaWxlcyA9PT0gMFxuIFx0XHRcdCkge1xuIFx0XHRcdFx0aG90VXBkYXRlRG93bmxvYWRlZCgpO1xuIFx0XHRcdH1cbiBcdFx0XHRyZXR1cm4gcHJvbWlzZTtcbiBcdFx0fSk7XG4gXHR9XG5cbiBcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFyc1xuIFx0ZnVuY3Rpb24gaG90QWRkVXBkYXRlQ2h1bmsoY2h1bmtJZCwgbW9yZU1vZHVsZXMpIHtcbiBcdFx0aWYgKCFob3RBdmFpbGFibGVGaWxlc01hcFtjaHVua0lkXSB8fCAhaG90UmVxdWVzdGVkRmlsZXNNYXBbY2h1bmtJZF0pXG4gXHRcdFx0cmV0dXJuO1xuIFx0XHRob3RSZXF1ZXN0ZWRGaWxlc01hcFtjaHVua0lkXSA9IGZhbHNlO1xuIFx0XHRmb3IgKHZhciBtb2R1bGVJZCBpbiBtb3JlTW9kdWxlcykge1xuIFx0XHRcdGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobW9yZU1vZHVsZXMsIG1vZHVsZUlkKSkge1xuIFx0XHRcdFx0aG90VXBkYXRlW21vZHVsZUlkXSA9IG1vcmVNb2R1bGVzW21vZHVsZUlkXTtcbiBcdFx0XHR9XG4gXHRcdH1cbiBcdFx0aWYgKC0taG90V2FpdGluZ0ZpbGVzID09PSAwICYmIGhvdENodW5rc0xvYWRpbmcgPT09IDApIHtcbiBcdFx0XHRob3RVcGRhdGVEb3dubG9hZGVkKCk7XG4gXHRcdH1cbiBcdH1cblxuIFx0ZnVuY3Rpb24gaG90RW5zdXJlVXBkYXRlQ2h1bmsoY2h1bmtJZCkge1xuIFx0XHRpZiAoIWhvdEF2YWlsYWJsZUZpbGVzTWFwW2NodW5rSWRdKSB7XG4gXHRcdFx0aG90V2FpdGluZ0ZpbGVzTWFwW2NodW5rSWRdID0gdHJ1ZTtcbiBcdFx0fSBlbHNlIHtcbiBcdFx0XHRob3RSZXF1ZXN0ZWRGaWxlc01hcFtjaHVua0lkXSA9IHRydWU7XG4gXHRcdFx0aG90V2FpdGluZ0ZpbGVzKys7XG4gXHRcdFx0aG90RG93bmxvYWRVcGRhdGVDaHVuayhjaHVua0lkKTtcbiBcdFx0fVxuIFx0fVxuXG4gXHRmdW5jdGlvbiBob3RVcGRhdGVEb3dubG9hZGVkKCkge1xuIFx0XHRob3RTZXRTdGF0dXMoXCJyZWFkeVwiKTtcbiBcdFx0dmFyIGRlZmVycmVkID0gaG90RGVmZXJyZWQ7XG4gXHRcdGhvdERlZmVycmVkID0gbnVsbDtcbiBcdFx0aWYgKCFkZWZlcnJlZCkgcmV0dXJuO1xuIFx0XHRpZiAoaG90QXBwbHlPblVwZGF0ZSkge1xuIFx0XHRcdC8vIFdyYXAgZGVmZXJyZWQgb2JqZWN0IGluIFByb21pc2UgdG8gbWFyayBpdCBhcyBhIHdlbGwtaGFuZGxlZCBQcm9taXNlIHRvXG4gXHRcdFx0Ly8gYXZvaWQgdHJpZ2dlcmluZyB1bmNhdWdodCBleGNlcHRpb24gd2FybmluZyBpbiBDaHJvbWUuXG4gXHRcdFx0Ly8gU2VlIGh0dHBzOi8vYnVncy5jaHJvbWl1bS5vcmcvcC9jaHJvbWl1bS9pc3N1ZXMvZGV0YWlsP2lkPTQ2NTY2NlxuIFx0XHRcdFByb21pc2UucmVzb2x2ZSgpXG4gXHRcdFx0XHQudGhlbihmdW5jdGlvbigpIHtcbiBcdFx0XHRcdFx0cmV0dXJuIGhvdEFwcGx5KGhvdEFwcGx5T25VcGRhdGUpO1xuIFx0XHRcdFx0fSlcbiBcdFx0XHRcdC50aGVuKFxuIFx0XHRcdFx0XHRmdW5jdGlvbihyZXN1bHQpIHtcbiBcdFx0XHRcdFx0XHRkZWZlcnJlZC5yZXNvbHZlKHJlc3VsdCk7XG4gXHRcdFx0XHRcdH0sXG4gXHRcdFx0XHRcdGZ1bmN0aW9uKGVycikge1xuIFx0XHRcdFx0XHRcdGRlZmVycmVkLnJlamVjdChlcnIpO1xuIFx0XHRcdFx0XHR9XG4gXHRcdFx0XHQpO1xuIFx0XHR9IGVsc2Uge1xuIFx0XHRcdHZhciBvdXRkYXRlZE1vZHVsZXMgPSBbXTtcbiBcdFx0XHRmb3IgKHZhciBpZCBpbiBob3RVcGRhdGUpIHtcbiBcdFx0XHRcdGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoaG90VXBkYXRlLCBpZCkpIHtcbiBcdFx0XHRcdFx0b3V0ZGF0ZWRNb2R1bGVzLnB1c2godG9Nb2R1bGVJZChpZCkpO1xuIFx0XHRcdFx0fVxuIFx0XHRcdH1cbiBcdFx0XHRkZWZlcnJlZC5yZXNvbHZlKG91dGRhdGVkTW9kdWxlcyk7XG4gXHRcdH1cbiBcdH1cblxuIFx0ZnVuY3Rpb24gaG90QXBwbHkob3B0aW9ucykge1xuIFx0XHRpZiAoaG90U3RhdHVzICE9PSBcInJlYWR5XCIpXG4gXHRcdFx0dGhyb3cgbmV3IEVycm9yKFwiYXBwbHkoKSBpcyBvbmx5IGFsbG93ZWQgaW4gcmVhZHkgc3RhdHVzXCIpO1xuIFx0XHRvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiBcdFx0cmV0dXJuIGhvdEFwcGx5SW50ZXJuYWwob3B0aW9ucyk7XG4gXHR9XG5cbiBcdGZ1bmN0aW9uIGhvdEFwcGx5SW50ZXJuYWwob3B0aW9ucykge1xuIFx0XHRob3RBcHBseUludmFsaWRhdGVkTW9kdWxlcygpO1xuXG4gXHRcdHZhciBjYjtcbiBcdFx0dmFyIGk7XG4gXHRcdHZhciBqO1xuIFx0XHR2YXIgbW9kdWxlO1xuIFx0XHR2YXIgbW9kdWxlSWQ7XG5cbiBcdFx0ZnVuY3Rpb24gZ2V0QWZmZWN0ZWRTdHVmZih1cGRhdGVNb2R1bGVJZCkge1xuIFx0XHRcdHZhciBvdXRkYXRlZE1vZHVsZXMgPSBbdXBkYXRlTW9kdWxlSWRdO1xuIFx0XHRcdHZhciBvdXRkYXRlZERlcGVuZGVuY2llcyA9IHt9O1xuXG4gXHRcdFx0dmFyIHF1ZXVlID0gb3V0ZGF0ZWRNb2R1bGVzLm1hcChmdW5jdGlvbihpZCkge1xuIFx0XHRcdFx0cmV0dXJuIHtcbiBcdFx0XHRcdFx0Y2hhaW46IFtpZF0sXG4gXHRcdFx0XHRcdGlkOiBpZFxuIFx0XHRcdFx0fTtcbiBcdFx0XHR9KTtcbiBcdFx0XHR3aGlsZSAocXVldWUubGVuZ3RoID4gMCkge1xuIFx0XHRcdFx0dmFyIHF1ZXVlSXRlbSA9IHF1ZXVlLnBvcCgpO1xuIFx0XHRcdFx0dmFyIG1vZHVsZUlkID0gcXVldWVJdGVtLmlkO1xuIFx0XHRcdFx0dmFyIGNoYWluID0gcXVldWVJdGVtLmNoYWluO1xuIFx0XHRcdFx0bW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF07XG4gXHRcdFx0XHRpZiAoXG4gXHRcdFx0XHRcdCFtb2R1bGUgfHxcbiBcdFx0XHRcdFx0KG1vZHVsZS5ob3QuX3NlbGZBY2NlcHRlZCAmJiAhbW9kdWxlLmhvdC5fc2VsZkludmFsaWRhdGVkKVxuIFx0XHRcdFx0KVxuIFx0XHRcdFx0XHRjb250aW51ZTtcbiBcdFx0XHRcdGlmIChtb2R1bGUuaG90Ll9zZWxmRGVjbGluZWQpIHtcbiBcdFx0XHRcdFx0cmV0dXJuIHtcbiBcdFx0XHRcdFx0XHR0eXBlOiBcInNlbGYtZGVjbGluZWRcIixcbiBcdFx0XHRcdFx0XHRjaGFpbjogY2hhaW4sXG4gXHRcdFx0XHRcdFx0bW9kdWxlSWQ6IG1vZHVsZUlkXG4gXHRcdFx0XHRcdH07XG4gXHRcdFx0XHR9XG4gXHRcdFx0XHRpZiAobW9kdWxlLmhvdC5fbWFpbikge1xuIFx0XHRcdFx0XHRyZXR1cm4ge1xuIFx0XHRcdFx0XHRcdHR5cGU6IFwidW5hY2NlcHRlZFwiLFxuIFx0XHRcdFx0XHRcdGNoYWluOiBjaGFpbixcbiBcdFx0XHRcdFx0XHRtb2R1bGVJZDogbW9kdWxlSWRcbiBcdFx0XHRcdFx0fTtcbiBcdFx0XHRcdH1cbiBcdFx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgbW9kdWxlLnBhcmVudHMubGVuZ3RoOyBpKyspIHtcbiBcdFx0XHRcdFx0dmFyIHBhcmVudElkID0gbW9kdWxlLnBhcmVudHNbaV07XG4gXHRcdFx0XHRcdHZhciBwYXJlbnQgPSBpbnN0YWxsZWRNb2R1bGVzW3BhcmVudElkXTtcbiBcdFx0XHRcdFx0aWYgKCFwYXJlbnQpIGNvbnRpbnVlO1xuIFx0XHRcdFx0XHRpZiAocGFyZW50LmhvdC5fZGVjbGluZWREZXBlbmRlbmNpZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0XHRcdFx0cmV0dXJuIHtcbiBcdFx0XHRcdFx0XHRcdHR5cGU6IFwiZGVjbGluZWRcIixcbiBcdFx0XHRcdFx0XHRcdGNoYWluOiBjaGFpbi5jb25jYXQoW3BhcmVudElkXSksXG4gXHRcdFx0XHRcdFx0XHRtb2R1bGVJZDogbW9kdWxlSWQsXG4gXHRcdFx0XHRcdFx0XHRwYXJlbnRJZDogcGFyZW50SWRcbiBcdFx0XHRcdFx0XHR9O1xuIFx0XHRcdFx0XHR9XG4gXHRcdFx0XHRcdGlmIChvdXRkYXRlZE1vZHVsZXMuaW5kZXhPZihwYXJlbnRJZCkgIT09IC0xKSBjb250aW51ZTtcbiBcdFx0XHRcdFx0aWYgKHBhcmVudC5ob3QuX2FjY2VwdGVkRGVwZW5kZW5jaWVzW21vZHVsZUlkXSkge1xuIFx0XHRcdFx0XHRcdGlmICghb3V0ZGF0ZWREZXBlbmRlbmNpZXNbcGFyZW50SWRdKVxuIFx0XHRcdFx0XHRcdFx0b3V0ZGF0ZWREZXBlbmRlbmNpZXNbcGFyZW50SWRdID0gW107XG4gXHRcdFx0XHRcdFx0YWRkQWxsVG9TZXQob3V0ZGF0ZWREZXBlbmRlbmNpZXNbcGFyZW50SWRdLCBbbW9kdWxlSWRdKTtcbiBcdFx0XHRcdFx0XHRjb250aW51ZTtcbiBcdFx0XHRcdFx0fVxuIFx0XHRcdFx0XHRkZWxldGUgb3V0ZGF0ZWREZXBlbmRlbmNpZXNbcGFyZW50SWRdO1xuIFx0XHRcdFx0XHRvdXRkYXRlZE1vZHVsZXMucHVzaChwYXJlbnRJZCk7XG4gXHRcdFx0XHRcdHF1ZXVlLnB1c2goe1xuIFx0XHRcdFx0XHRcdGNoYWluOiBjaGFpbi5jb25jYXQoW3BhcmVudElkXSksXG4gXHRcdFx0XHRcdFx0aWQ6IHBhcmVudElkXG4gXHRcdFx0XHRcdH0pO1xuIFx0XHRcdFx0fVxuIFx0XHRcdH1cblxuIFx0XHRcdHJldHVybiB7XG4gXHRcdFx0XHR0eXBlOiBcImFjY2VwdGVkXCIsXG4gXHRcdFx0XHRtb2R1bGVJZDogdXBkYXRlTW9kdWxlSWQsXG4gXHRcdFx0XHRvdXRkYXRlZE1vZHVsZXM6IG91dGRhdGVkTW9kdWxlcyxcbiBcdFx0XHRcdG91dGRhdGVkRGVwZW5kZW5jaWVzOiBvdXRkYXRlZERlcGVuZGVuY2llc1xuIFx0XHRcdH07XG4gXHRcdH1cblxuIFx0XHRmdW5jdGlvbiBhZGRBbGxUb1NldChhLCBiKSB7XG4gXHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBiLmxlbmd0aDsgaSsrKSB7XG4gXHRcdFx0XHR2YXIgaXRlbSA9IGJbaV07XG4gXHRcdFx0XHRpZiAoYS5pbmRleE9mKGl0ZW0pID09PSAtMSkgYS5wdXNoKGl0ZW0pO1xuIFx0XHRcdH1cbiBcdFx0fVxuXG4gXHRcdC8vIGF0IGJlZ2luIGFsbCB1cGRhdGVzIG1vZHVsZXMgYXJlIG91dGRhdGVkXG4gXHRcdC8vIHRoZSBcIm91dGRhdGVkXCIgc3RhdHVzIGNhbiBwcm9wYWdhdGUgdG8gcGFyZW50cyBpZiB0aGV5IGRvbid0IGFjY2VwdCB0aGUgY2hpbGRyZW5cbiBcdFx0dmFyIG91dGRhdGVkRGVwZW5kZW5jaWVzID0ge307XG4gXHRcdHZhciBvdXRkYXRlZE1vZHVsZXMgPSBbXTtcbiBcdFx0dmFyIGFwcGxpZWRVcGRhdGUgPSB7fTtcblxuIFx0XHR2YXIgd2FyblVuZXhwZWN0ZWRSZXF1aXJlID0gZnVuY3Rpb24gd2FyblVuZXhwZWN0ZWRSZXF1aXJlKCkge1xuIFx0XHRcdGNvbnNvbGUud2FybihcbiBcdFx0XHRcdFwiW0hNUl0gdW5leHBlY3RlZCByZXF1aXJlKFwiICsgcmVzdWx0Lm1vZHVsZUlkICsgXCIpIHRvIGRpc3Bvc2VkIG1vZHVsZVwiXG4gXHRcdFx0KTtcbiBcdFx0fTtcblxuIFx0XHRmb3IgKHZhciBpZCBpbiBob3RVcGRhdGUpIHtcbiBcdFx0XHRpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGhvdFVwZGF0ZSwgaWQpKSB7XG4gXHRcdFx0XHRtb2R1bGVJZCA9IHRvTW9kdWxlSWQoaWQpO1xuIFx0XHRcdFx0LyoqIEB0eXBlIHtUT0RPfSAqL1xuIFx0XHRcdFx0dmFyIHJlc3VsdDtcbiBcdFx0XHRcdGlmIChob3RVcGRhdGVbaWRdKSB7XG4gXHRcdFx0XHRcdHJlc3VsdCA9IGdldEFmZmVjdGVkU3R1ZmYobW9kdWxlSWQpO1xuIFx0XHRcdFx0fSBlbHNlIHtcbiBcdFx0XHRcdFx0cmVzdWx0ID0ge1xuIFx0XHRcdFx0XHRcdHR5cGU6IFwiZGlzcG9zZWRcIixcbiBcdFx0XHRcdFx0XHRtb2R1bGVJZDogaWRcbiBcdFx0XHRcdFx0fTtcbiBcdFx0XHRcdH1cbiBcdFx0XHRcdC8qKiBAdHlwZSB7RXJyb3J8ZmFsc2V9ICovXG4gXHRcdFx0XHR2YXIgYWJvcnRFcnJvciA9IGZhbHNlO1xuIFx0XHRcdFx0dmFyIGRvQXBwbHkgPSBmYWxzZTtcbiBcdFx0XHRcdHZhciBkb0Rpc3Bvc2UgPSBmYWxzZTtcbiBcdFx0XHRcdHZhciBjaGFpbkluZm8gPSBcIlwiO1xuIFx0XHRcdFx0aWYgKHJlc3VsdC5jaGFpbikge1xuIFx0XHRcdFx0XHRjaGFpbkluZm8gPSBcIlxcblVwZGF0ZSBwcm9wYWdhdGlvbjogXCIgKyByZXN1bHQuY2hhaW4uam9pbihcIiAtPiBcIik7XG4gXHRcdFx0XHR9XG4gXHRcdFx0XHRzd2l0Y2ggKHJlc3VsdC50eXBlKSB7XG4gXHRcdFx0XHRcdGNhc2UgXCJzZWxmLWRlY2xpbmVkXCI6XG4gXHRcdFx0XHRcdFx0aWYgKG9wdGlvbnMub25EZWNsaW5lZCkgb3B0aW9ucy5vbkRlY2xpbmVkKHJlc3VsdCk7XG4gXHRcdFx0XHRcdFx0aWYgKCFvcHRpb25zLmlnbm9yZURlY2xpbmVkKVxuIFx0XHRcdFx0XHRcdFx0YWJvcnRFcnJvciA9IG5ldyBFcnJvcihcbiBcdFx0XHRcdFx0XHRcdFx0XCJBYm9ydGVkIGJlY2F1c2Ugb2Ygc2VsZiBkZWNsaW5lOiBcIiArXG4gXHRcdFx0XHRcdFx0XHRcdFx0cmVzdWx0Lm1vZHVsZUlkICtcbiBcdFx0XHRcdFx0XHRcdFx0XHRjaGFpbkluZm9cbiBcdFx0XHRcdFx0XHRcdCk7XG4gXHRcdFx0XHRcdFx0YnJlYWs7XG4gXHRcdFx0XHRcdGNhc2UgXCJkZWNsaW5lZFwiOlxuIFx0XHRcdFx0XHRcdGlmIChvcHRpb25zLm9uRGVjbGluZWQpIG9wdGlvbnMub25EZWNsaW5lZChyZXN1bHQpO1xuIFx0XHRcdFx0XHRcdGlmICghb3B0aW9ucy5pZ25vcmVEZWNsaW5lZClcbiBcdFx0XHRcdFx0XHRcdGFib3J0RXJyb3IgPSBuZXcgRXJyb3IoXG4gXHRcdFx0XHRcdFx0XHRcdFwiQWJvcnRlZCBiZWNhdXNlIG9mIGRlY2xpbmVkIGRlcGVuZGVuY3k6IFwiICtcbiBcdFx0XHRcdFx0XHRcdFx0XHRyZXN1bHQubW9kdWxlSWQgK1xuIFx0XHRcdFx0XHRcdFx0XHRcdFwiIGluIFwiICtcbiBcdFx0XHRcdFx0XHRcdFx0XHRyZXN1bHQucGFyZW50SWQgK1xuIFx0XHRcdFx0XHRcdFx0XHRcdGNoYWluSW5mb1xuIFx0XHRcdFx0XHRcdFx0KTtcbiBcdFx0XHRcdFx0XHRicmVhaztcbiBcdFx0XHRcdFx0Y2FzZSBcInVuYWNjZXB0ZWRcIjpcbiBcdFx0XHRcdFx0XHRpZiAob3B0aW9ucy5vblVuYWNjZXB0ZWQpIG9wdGlvbnMub25VbmFjY2VwdGVkKHJlc3VsdCk7XG4gXHRcdFx0XHRcdFx0aWYgKCFvcHRpb25zLmlnbm9yZVVuYWNjZXB0ZWQpXG4gXHRcdFx0XHRcdFx0XHRhYm9ydEVycm9yID0gbmV3IEVycm9yKFxuIFx0XHRcdFx0XHRcdFx0XHRcIkFib3J0ZWQgYmVjYXVzZSBcIiArIG1vZHVsZUlkICsgXCIgaXMgbm90IGFjY2VwdGVkXCIgKyBjaGFpbkluZm9cbiBcdFx0XHRcdFx0XHRcdCk7XG4gXHRcdFx0XHRcdFx0YnJlYWs7XG4gXHRcdFx0XHRcdGNhc2UgXCJhY2NlcHRlZFwiOlxuIFx0XHRcdFx0XHRcdGlmIChvcHRpb25zLm9uQWNjZXB0ZWQpIG9wdGlvbnMub25BY2NlcHRlZChyZXN1bHQpO1xuIFx0XHRcdFx0XHRcdGRvQXBwbHkgPSB0cnVlO1xuIFx0XHRcdFx0XHRcdGJyZWFrO1xuIFx0XHRcdFx0XHRjYXNlIFwiZGlzcG9zZWRcIjpcbiBcdFx0XHRcdFx0XHRpZiAob3B0aW9ucy5vbkRpc3Bvc2VkKSBvcHRpb25zLm9uRGlzcG9zZWQocmVzdWx0KTtcbiBcdFx0XHRcdFx0XHRkb0Rpc3Bvc2UgPSB0cnVlO1xuIFx0XHRcdFx0XHRcdGJyZWFrO1xuIFx0XHRcdFx0XHRkZWZhdWx0OlxuIFx0XHRcdFx0XHRcdHRocm93IG5ldyBFcnJvcihcIlVuZXhjZXB0aW9uIHR5cGUgXCIgKyByZXN1bHQudHlwZSk7XG4gXHRcdFx0XHR9XG4gXHRcdFx0XHRpZiAoYWJvcnRFcnJvcikge1xuIFx0XHRcdFx0XHRob3RTZXRTdGF0dXMoXCJhYm9ydFwiKTtcbiBcdFx0XHRcdFx0cmV0dXJuIFByb21pc2UucmVqZWN0KGFib3J0RXJyb3IpO1xuIFx0XHRcdFx0fVxuIFx0XHRcdFx0aWYgKGRvQXBwbHkpIHtcbiBcdFx0XHRcdFx0YXBwbGllZFVwZGF0ZVttb2R1bGVJZF0gPSBob3RVcGRhdGVbbW9kdWxlSWRdO1xuIFx0XHRcdFx0XHRhZGRBbGxUb1NldChvdXRkYXRlZE1vZHVsZXMsIHJlc3VsdC5vdXRkYXRlZE1vZHVsZXMpO1xuIFx0XHRcdFx0XHRmb3IgKG1vZHVsZUlkIGluIHJlc3VsdC5vdXRkYXRlZERlcGVuZGVuY2llcykge1xuIFx0XHRcdFx0XHRcdGlmIChcbiBcdFx0XHRcdFx0XHRcdE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChcbiBcdFx0XHRcdFx0XHRcdFx0cmVzdWx0Lm91dGRhdGVkRGVwZW5kZW5jaWVzLFxuIFx0XHRcdFx0XHRcdFx0XHRtb2R1bGVJZFxuIFx0XHRcdFx0XHRcdFx0KVxuIFx0XHRcdFx0XHRcdCkge1xuIFx0XHRcdFx0XHRcdFx0aWYgKCFvdXRkYXRlZERlcGVuZGVuY2llc1ttb2R1bGVJZF0pXG4gXHRcdFx0XHRcdFx0XHRcdG91dGRhdGVkRGVwZW5kZW5jaWVzW21vZHVsZUlkXSA9IFtdO1xuIFx0XHRcdFx0XHRcdFx0YWRkQWxsVG9TZXQoXG4gXHRcdFx0XHRcdFx0XHRcdG91dGRhdGVkRGVwZW5kZW5jaWVzW21vZHVsZUlkXSxcbiBcdFx0XHRcdFx0XHRcdFx0cmVzdWx0Lm91dGRhdGVkRGVwZW5kZW5jaWVzW21vZHVsZUlkXVxuIFx0XHRcdFx0XHRcdFx0KTtcbiBcdFx0XHRcdFx0XHR9XG4gXHRcdFx0XHRcdH1cbiBcdFx0XHRcdH1cbiBcdFx0XHRcdGlmIChkb0Rpc3Bvc2UpIHtcbiBcdFx0XHRcdFx0YWRkQWxsVG9TZXQob3V0ZGF0ZWRNb2R1bGVzLCBbcmVzdWx0Lm1vZHVsZUlkXSk7XG4gXHRcdFx0XHRcdGFwcGxpZWRVcGRhdGVbbW9kdWxlSWRdID0gd2FyblVuZXhwZWN0ZWRSZXF1aXJlO1xuIFx0XHRcdFx0fVxuIFx0XHRcdH1cbiBcdFx0fVxuXG4gXHRcdC8vIFN0b3JlIHNlbGYgYWNjZXB0ZWQgb3V0ZGF0ZWQgbW9kdWxlcyB0byByZXF1aXJlIHRoZW0gbGF0ZXIgYnkgdGhlIG1vZHVsZSBzeXN0ZW1cbiBcdFx0dmFyIG91dGRhdGVkU2VsZkFjY2VwdGVkTW9kdWxlcyA9IFtdO1xuIFx0XHRmb3IgKGkgPSAwOyBpIDwgb3V0ZGF0ZWRNb2R1bGVzLmxlbmd0aDsgaSsrKSB7XG4gXHRcdFx0bW9kdWxlSWQgPSBvdXRkYXRlZE1vZHVsZXNbaV07XG4gXHRcdFx0aWYgKFxuIFx0XHRcdFx0aW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gJiZcbiBcdFx0XHRcdGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmhvdC5fc2VsZkFjY2VwdGVkICYmXG4gXHRcdFx0XHQvLyByZW1vdmVkIHNlbGYtYWNjZXB0ZWQgbW9kdWxlcyBzaG91bGQgbm90IGJlIHJlcXVpcmVkXG4gXHRcdFx0XHRhcHBsaWVkVXBkYXRlW21vZHVsZUlkXSAhPT0gd2FyblVuZXhwZWN0ZWRSZXF1aXJlICYmXG4gXHRcdFx0XHQvLyB3aGVuIGNhbGxlZCBpbnZhbGlkYXRlIHNlbGYtYWNjZXB0aW5nIGlzIG5vdCBwb3NzaWJsZVxuIFx0XHRcdFx0IWluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmhvdC5fc2VsZkludmFsaWRhdGVkXG4gXHRcdFx0KSB7XG4gXHRcdFx0XHRvdXRkYXRlZFNlbGZBY2NlcHRlZE1vZHVsZXMucHVzaCh7XG4gXHRcdFx0XHRcdG1vZHVsZTogbW9kdWxlSWQsXG4gXHRcdFx0XHRcdHBhcmVudHM6IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLnBhcmVudHMuc2xpY2UoKSxcbiBcdFx0XHRcdFx0ZXJyb3JIYW5kbGVyOiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5ob3QuX3NlbGZBY2NlcHRlZFxuIFx0XHRcdFx0fSk7XG4gXHRcdFx0fVxuIFx0XHR9XG5cbiBcdFx0Ly8gTm93IGluIFwiZGlzcG9zZVwiIHBoYXNlXG4gXHRcdGhvdFNldFN0YXR1cyhcImRpc3Bvc2VcIik7XG4gXHRcdE9iamVjdC5rZXlzKGhvdEF2YWlsYWJsZUZpbGVzTWFwKS5mb3JFYWNoKGZ1bmN0aW9uKGNodW5rSWQpIHtcbiBcdFx0XHRpZiAoaG90QXZhaWxhYmxlRmlsZXNNYXBbY2h1bmtJZF0gPT09IGZhbHNlKSB7XG4gXHRcdFx0XHRob3REaXNwb3NlQ2h1bmsoY2h1bmtJZCk7XG4gXHRcdFx0fVxuIFx0XHR9KTtcblxuIFx0XHR2YXIgaWR4O1xuIFx0XHR2YXIgcXVldWUgPSBvdXRkYXRlZE1vZHVsZXMuc2xpY2UoKTtcbiBcdFx0d2hpbGUgKHF1ZXVlLmxlbmd0aCA+IDApIHtcbiBcdFx0XHRtb2R1bGVJZCA9IHF1ZXVlLnBvcCgpO1xuIFx0XHRcdG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdO1xuIFx0XHRcdGlmICghbW9kdWxlKSBjb250aW51ZTtcblxuIFx0XHRcdHZhciBkYXRhID0ge307XG5cbiBcdFx0XHQvLyBDYWxsIGRpc3Bvc2UgaGFuZGxlcnNcbiBcdFx0XHR2YXIgZGlzcG9zZUhhbmRsZXJzID0gbW9kdWxlLmhvdC5fZGlzcG9zZUhhbmRsZXJzO1xuIFx0XHRcdGZvciAoaiA9IDA7IGogPCBkaXNwb3NlSGFuZGxlcnMubGVuZ3RoOyBqKyspIHtcbiBcdFx0XHRcdGNiID0gZGlzcG9zZUhhbmRsZXJzW2pdO1xuIFx0XHRcdFx0Y2IoZGF0YSk7XG4gXHRcdFx0fVxuIFx0XHRcdGhvdEN1cnJlbnRNb2R1bGVEYXRhW21vZHVsZUlkXSA9IGRhdGE7XG5cbiBcdFx0XHQvLyBkaXNhYmxlIG1vZHVsZSAodGhpcyBkaXNhYmxlcyByZXF1aXJlcyBmcm9tIHRoaXMgbW9kdWxlKVxuIFx0XHRcdG1vZHVsZS5ob3QuYWN0aXZlID0gZmFsc2U7XG5cbiBcdFx0XHQvLyByZW1vdmUgbW9kdWxlIGZyb20gY2FjaGVcbiBcdFx0XHRkZWxldGUgaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF07XG5cbiBcdFx0XHQvLyB3aGVuIGRpc3Bvc2luZyB0aGVyZSBpcyBubyBuZWVkIHRvIGNhbGwgZGlzcG9zZSBoYW5kbGVyXG4gXHRcdFx0ZGVsZXRlIG91dGRhdGVkRGVwZW5kZW5jaWVzW21vZHVsZUlkXTtcblxuIFx0XHRcdC8vIHJlbW92ZSBcInBhcmVudHNcIiByZWZlcmVuY2VzIGZyb20gYWxsIGNoaWxkcmVuXG4gXHRcdFx0Zm9yIChqID0gMDsgaiA8IG1vZHVsZS5jaGlsZHJlbi5sZW5ndGg7IGorKykge1xuIFx0XHRcdFx0dmFyIGNoaWxkID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGUuY2hpbGRyZW5bal1dO1xuIFx0XHRcdFx0aWYgKCFjaGlsZCkgY29udGludWU7XG4gXHRcdFx0XHRpZHggPSBjaGlsZC5wYXJlbnRzLmluZGV4T2YobW9kdWxlSWQpO1xuIFx0XHRcdFx0aWYgKGlkeCA+PSAwKSB7XG4gXHRcdFx0XHRcdGNoaWxkLnBhcmVudHMuc3BsaWNlKGlkeCwgMSk7XG4gXHRcdFx0XHR9XG4gXHRcdFx0fVxuIFx0XHR9XG5cbiBcdFx0Ly8gcmVtb3ZlIG91dGRhdGVkIGRlcGVuZGVuY3kgZnJvbSBtb2R1bGUgY2hpbGRyZW5cbiBcdFx0dmFyIGRlcGVuZGVuY3k7XG4gXHRcdHZhciBtb2R1bGVPdXRkYXRlZERlcGVuZGVuY2llcztcbiBcdFx0Zm9yIChtb2R1bGVJZCBpbiBvdXRkYXRlZERlcGVuZGVuY2llcykge1xuIFx0XHRcdGlmIChcbiBcdFx0XHRcdE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvdXRkYXRlZERlcGVuZGVuY2llcywgbW9kdWxlSWQpXG4gXHRcdFx0KSB7XG4gXHRcdFx0XHRtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXTtcbiBcdFx0XHRcdGlmIChtb2R1bGUpIHtcbiBcdFx0XHRcdFx0bW9kdWxlT3V0ZGF0ZWREZXBlbmRlbmNpZXMgPSBvdXRkYXRlZERlcGVuZGVuY2llc1ttb2R1bGVJZF07XG4gXHRcdFx0XHRcdGZvciAoaiA9IDA7IGogPCBtb2R1bGVPdXRkYXRlZERlcGVuZGVuY2llcy5sZW5ndGg7IGorKykge1xuIFx0XHRcdFx0XHRcdGRlcGVuZGVuY3kgPSBtb2R1bGVPdXRkYXRlZERlcGVuZGVuY2llc1tqXTtcbiBcdFx0XHRcdFx0XHRpZHggPSBtb2R1bGUuY2hpbGRyZW4uaW5kZXhPZihkZXBlbmRlbmN5KTtcbiBcdFx0XHRcdFx0XHRpZiAoaWR4ID49IDApIG1vZHVsZS5jaGlsZHJlbi5zcGxpY2UoaWR4LCAxKTtcbiBcdFx0XHRcdFx0fVxuIFx0XHRcdFx0fVxuIFx0XHRcdH1cbiBcdFx0fVxuXG4gXHRcdC8vIE5vdyBpbiBcImFwcGx5XCIgcGhhc2VcbiBcdFx0aG90U2V0U3RhdHVzKFwiYXBwbHlcIik7XG5cbiBcdFx0aWYgKGhvdFVwZGF0ZU5ld0hhc2ggIT09IHVuZGVmaW5lZCkge1xuIFx0XHRcdGhvdEN1cnJlbnRIYXNoID0gaG90VXBkYXRlTmV3SGFzaDtcbiBcdFx0XHRob3RVcGRhdGVOZXdIYXNoID0gdW5kZWZpbmVkO1xuIFx0XHR9XG4gXHRcdGhvdFVwZGF0ZSA9IHVuZGVmaW5lZDtcblxuIFx0XHQvLyBpbnNlcnQgbmV3IGNvZGVcbiBcdFx0Zm9yIChtb2R1bGVJZCBpbiBhcHBsaWVkVXBkYXRlKSB7XG4gXHRcdFx0aWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChhcHBsaWVkVXBkYXRlLCBtb2R1bGVJZCkpIHtcbiBcdFx0XHRcdG1vZHVsZXNbbW9kdWxlSWRdID0gYXBwbGllZFVwZGF0ZVttb2R1bGVJZF07XG4gXHRcdFx0fVxuIFx0XHR9XG5cbiBcdFx0Ly8gY2FsbCBhY2NlcHQgaGFuZGxlcnNcbiBcdFx0dmFyIGVycm9yID0gbnVsbDtcbiBcdFx0Zm9yIChtb2R1bGVJZCBpbiBvdXRkYXRlZERlcGVuZGVuY2llcykge1xuIFx0XHRcdGlmIChcbiBcdFx0XHRcdE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvdXRkYXRlZERlcGVuZGVuY2llcywgbW9kdWxlSWQpXG4gXHRcdFx0KSB7XG4gXHRcdFx0XHRtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXTtcbiBcdFx0XHRcdGlmIChtb2R1bGUpIHtcbiBcdFx0XHRcdFx0bW9kdWxlT3V0ZGF0ZWREZXBlbmRlbmNpZXMgPSBvdXRkYXRlZERlcGVuZGVuY2llc1ttb2R1bGVJZF07XG4gXHRcdFx0XHRcdHZhciBjYWxsYmFja3MgPSBbXTtcbiBcdFx0XHRcdFx0Zm9yIChpID0gMDsgaSA8IG1vZHVsZU91dGRhdGVkRGVwZW5kZW5jaWVzLmxlbmd0aDsgaSsrKSB7XG4gXHRcdFx0XHRcdFx0ZGVwZW5kZW5jeSA9IG1vZHVsZU91dGRhdGVkRGVwZW5kZW5jaWVzW2ldO1xuIFx0XHRcdFx0XHRcdGNiID0gbW9kdWxlLmhvdC5fYWNjZXB0ZWREZXBlbmRlbmNpZXNbZGVwZW5kZW5jeV07XG4gXHRcdFx0XHRcdFx0aWYgKGNiKSB7XG4gXHRcdFx0XHRcdFx0XHRpZiAoY2FsbGJhY2tzLmluZGV4T2YoY2IpICE9PSAtMSkgY29udGludWU7XG4gXHRcdFx0XHRcdFx0XHRjYWxsYmFja3MucHVzaChjYik7XG4gXHRcdFx0XHRcdFx0fVxuIFx0XHRcdFx0XHR9XG4gXHRcdFx0XHRcdGZvciAoaSA9IDA7IGkgPCBjYWxsYmFja3MubGVuZ3RoOyBpKyspIHtcbiBcdFx0XHRcdFx0XHRjYiA9IGNhbGxiYWNrc1tpXTtcbiBcdFx0XHRcdFx0XHR0cnkge1xuIFx0XHRcdFx0XHRcdFx0Y2IobW9kdWxlT3V0ZGF0ZWREZXBlbmRlbmNpZXMpO1xuIFx0XHRcdFx0XHRcdH0gY2F0Y2ggKGVycikge1xuIFx0XHRcdFx0XHRcdFx0aWYgKG9wdGlvbnMub25FcnJvcmVkKSB7XG4gXHRcdFx0XHRcdFx0XHRcdG9wdGlvbnMub25FcnJvcmVkKHtcbiBcdFx0XHRcdFx0XHRcdFx0XHR0eXBlOiBcImFjY2VwdC1lcnJvcmVkXCIsXG4gXHRcdFx0XHRcdFx0XHRcdFx0bW9kdWxlSWQ6IG1vZHVsZUlkLFxuIFx0XHRcdFx0XHRcdFx0XHRcdGRlcGVuZGVuY3lJZDogbW9kdWxlT3V0ZGF0ZWREZXBlbmRlbmNpZXNbaV0sXG4gXHRcdFx0XHRcdFx0XHRcdFx0ZXJyb3I6IGVyclxuIFx0XHRcdFx0XHRcdFx0XHR9KTtcbiBcdFx0XHRcdFx0XHRcdH1cbiBcdFx0XHRcdFx0XHRcdGlmICghb3B0aW9ucy5pZ25vcmVFcnJvcmVkKSB7XG4gXHRcdFx0XHRcdFx0XHRcdGlmICghZXJyb3IpIGVycm9yID0gZXJyO1xuIFx0XHRcdFx0XHRcdFx0fVxuIFx0XHRcdFx0XHRcdH1cbiBcdFx0XHRcdFx0fVxuIFx0XHRcdFx0fVxuIFx0XHRcdH1cbiBcdFx0fVxuXG4gXHRcdC8vIExvYWQgc2VsZiBhY2NlcHRlZCBtb2R1bGVzXG4gXHRcdGZvciAoaSA9IDA7IGkgPCBvdXRkYXRlZFNlbGZBY2NlcHRlZE1vZHVsZXMubGVuZ3RoOyBpKyspIHtcbiBcdFx0XHR2YXIgaXRlbSA9IG91dGRhdGVkU2VsZkFjY2VwdGVkTW9kdWxlc1tpXTtcbiBcdFx0XHRtb2R1bGVJZCA9IGl0ZW0ubW9kdWxlO1xuIFx0XHRcdGhvdEN1cnJlbnRQYXJlbnRzID0gaXRlbS5wYXJlbnRzO1xuIFx0XHRcdGhvdEN1cnJlbnRDaGlsZE1vZHVsZSA9IG1vZHVsZUlkO1xuIFx0XHRcdHRyeSB7XG4gXHRcdFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKTtcbiBcdFx0XHR9IGNhdGNoIChlcnIpIHtcbiBcdFx0XHRcdGlmICh0eXBlb2YgaXRlbS5lcnJvckhhbmRsZXIgPT09IFwiZnVuY3Rpb25cIikge1xuIFx0XHRcdFx0XHR0cnkge1xuIFx0XHRcdFx0XHRcdGl0ZW0uZXJyb3JIYW5kbGVyKGVycik7XG4gXHRcdFx0XHRcdH0gY2F0Y2ggKGVycjIpIHtcbiBcdFx0XHRcdFx0XHRpZiAob3B0aW9ucy5vbkVycm9yZWQpIHtcbiBcdFx0XHRcdFx0XHRcdG9wdGlvbnMub25FcnJvcmVkKHtcbiBcdFx0XHRcdFx0XHRcdFx0dHlwZTogXCJzZWxmLWFjY2VwdC1lcnJvci1oYW5kbGVyLWVycm9yZWRcIixcbiBcdFx0XHRcdFx0XHRcdFx0bW9kdWxlSWQ6IG1vZHVsZUlkLFxuIFx0XHRcdFx0XHRcdFx0XHRlcnJvcjogZXJyMixcbiBcdFx0XHRcdFx0XHRcdFx0b3JpZ2luYWxFcnJvcjogZXJyXG4gXHRcdFx0XHRcdFx0XHR9KTtcbiBcdFx0XHRcdFx0XHR9XG4gXHRcdFx0XHRcdFx0aWYgKCFvcHRpb25zLmlnbm9yZUVycm9yZWQpIHtcbiBcdFx0XHRcdFx0XHRcdGlmICghZXJyb3IpIGVycm9yID0gZXJyMjtcbiBcdFx0XHRcdFx0XHR9XG4gXHRcdFx0XHRcdFx0aWYgKCFlcnJvcikgZXJyb3IgPSBlcnI7XG4gXHRcdFx0XHRcdH1cbiBcdFx0XHRcdH0gZWxzZSB7XG4gXHRcdFx0XHRcdGlmIChvcHRpb25zLm9uRXJyb3JlZCkge1xuIFx0XHRcdFx0XHRcdG9wdGlvbnMub25FcnJvcmVkKHtcbiBcdFx0XHRcdFx0XHRcdHR5cGU6IFwic2VsZi1hY2NlcHQtZXJyb3JlZFwiLFxuIFx0XHRcdFx0XHRcdFx0bW9kdWxlSWQ6IG1vZHVsZUlkLFxuIFx0XHRcdFx0XHRcdFx0ZXJyb3I6IGVyclxuIFx0XHRcdFx0XHRcdH0pO1xuIFx0XHRcdFx0XHR9XG4gXHRcdFx0XHRcdGlmICghb3B0aW9ucy5pZ25vcmVFcnJvcmVkKSB7XG4gXHRcdFx0XHRcdFx0aWYgKCFlcnJvcikgZXJyb3IgPSBlcnI7XG4gXHRcdFx0XHRcdH1cbiBcdFx0XHRcdH1cbiBcdFx0XHR9XG4gXHRcdH1cblxuIFx0XHQvLyBoYW5kbGUgZXJyb3JzIGluIGFjY2VwdCBoYW5kbGVycyBhbmQgc2VsZiBhY2NlcHRlZCBtb2R1bGUgbG9hZFxuIFx0XHRpZiAoZXJyb3IpIHtcbiBcdFx0XHRob3RTZXRTdGF0dXMoXCJmYWlsXCIpO1xuIFx0XHRcdHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7XG4gXHRcdH1cblxuIFx0XHRpZiAoaG90UXVldWVkSW52YWxpZGF0ZWRNb2R1bGVzKSB7XG4gXHRcdFx0cmV0dXJuIGhvdEFwcGx5SW50ZXJuYWwob3B0aW9ucykudGhlbihmdW5jdGlvbihsaXN0KSB7XG4gXHRcdFx0XHRvdXRkYXRlZE1vZHVsZXMuZm9yRWFjaChmdW5jdGlvbihtb2R1bGVJZCkge1xuIFx0XHRcdFx0XHRpZiAobGlzdC5pbmRleE9mKG1vZHVsZUlkKSA8IDApIGxpc3QucHVzaChtb2R1bGVJZCk7XG4gXHRcdFx0XHR9KTtcbiBcdFx0XHRcdHJldHVybiBsaXN0O1xuIFx0XHRcdH0pO1xuIFx0XHR9XG5cbiBcdFx0aG90U2V0U3RhdHVzKFwiaWRsZVwiKTtcbiBcdFx0cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUpIHtcbiBcdFx0XHRyZXNvbHZlKG91dGRhdGVkTW9kdWxlcyk7XG4gXHRcdH0pO1xuIFx0fVxuXG4gXHRmdW5jdGlvbiBob3RBcHBseUludmFsaWRhdGVkTW9kdWxlcygpIHtcbiBcdFx0aWYgKGhvdFF1ZXVlZEludmFsaWRhdGVkTW9kdWxlcykge1xuIFx0XHRcdGlmICghaG90VXBkYXRlKSBob3RVcGRhdGUgPSB7fTtcbiBcdFx0XHRob3RRdWV1ZWRJbnZhbGlkYXRlZE1vZHVsZXMuZm9yRWFjaChob3RBcHBseUludmFsaWRhdGVkTW9kdWxlKTtcbiBcdFx0XHRob3RRdWV1ZWRJbnZhbGlkYXRlZE1vZHVsZXMgPSB1bmRlZmluZWQ7XG4gXHRcdFx0cmV0dXJuIHRydWU7XG4gXHRcdH1cbiBcdH1cblxuIFx0ZnVuY3Rpb24gaG90QXBwbHlJbnZhbGlkYXRlZE1vZHVsZShtb2R1bGVJZCkge1xuIFx0XHRpZiAoIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChob3RVcGRhdGUsIG1vZHVsZUlkKSlcbiBcdFx0XHRob3RVcGRhdGVbbW9kdWxlSWRdID0gbW9kdWxlc1ttb2R1bGVJZF07XG4gXHR9XG5cbiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIG9iamVjdCB0byBzdG9yZSBsb2FkZWQgYW5kIGxvYWRpbmcgd2FzbSBtb2R1bGVzXG4gXHR2YXIgaW5zdGFsbGVkV2FzbU1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge30sXG4gXHRcdFx0aG90OiBob3RDcmVhdGVNb2R1bGUobW9kdWxlSWQpLFxuIFx0XHRcdHBhcmVudHM6IChob3RDdXJyZW50UGFyZW50c1RlbXAgPSBob3RDdXJyZW50UGFyZW50cywgaG90Q3VycmVudFBhcmVudHMgPSBbXSwgaG90Q3VycmVudFBhcmVudHNUZW1wKSxcbiBcdFx0XHRjaGlsZHJlbjogW11cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgaG90Q3JlYXRlUmVxdWlyZShtb2R1bGVJZCkpO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwge1xuIFx0XHRcdFx0Y29uZmlndXJhYmxlOiBmYWxzZSxcbiBcdFx0XHRcdGVudW1lcmFibGU6IHRydWUsXG4gXHRcdFx0XHRnZXQ6IGdldHRlclxuIFx0XHRcdH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIi9Vc2Vycy9zYWlmL0Rlc2t0b3AvaHV0YWliL2xvZ2luL2Rpc3RcIjtcblxuIFx0Ly8gb2JqZWN0IHdpdGggYWxsIGNvbXBpbGVkIFdlYkFzc2VtYmx5Lk1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18udyA9IHt9O1xuXG4gXHQvLyBfX3dlYnBhY2tfaGFzaF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmggPSBmdW5jdGlvbigpIHsgcmV0dXJuIGhvdEN1cnJlbnRIYXNoOyB9O1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIGhvdENyZWF0ZVJlcXVpcmUoMTMpKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDEzKTtcbiIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIm1hcmlhZGJcIik7IiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwicGFzc3dvcmQtaGFzaFwiKTsiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJqc29ud2VidG9rZW5cIik7IiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwicGFzc3BvcnQtand0XCIpOyIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcInBhc3Nwb3J0XCIpOyIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcImJvZHktcGFyc2VyXCIpOyIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIm1vcmdhblwiKTsiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJleHByZXNzXCIpOyIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuY29uc3QgZXhwcmVzcyA9IHJlcXVpcmUoXCJleHByZXNzXCIpO1xuY29uc3QgbG9nZ2VyID0gcmVxdWlyZShcIm1vcmdhblwiKTtcbmNvbnN0IGJvZHlQYXJzZXIgPSByZXF1aXJlKFwiYm9keS1wYXJzZXJcIik7XG5jb25zdCBwYXNzcG9ydCA9IHJlcXVpcmUoXCJwYXNzcG9ydFwiKTtcbmNvbnN0IHBhc3Nwb3J0SldUID0gcmVxdWlyZShcInBhc3Nwb3J0LWp3dFwiKTtcbmNvbnN0IGp3dCA9IHJlcXVpcmUoXCJqc29ud2VidG9rZW5cIik7XG5jb25zdCBwYXNzd29yZGhhc2ggPSByZXF1aXJlKFwicGFzc3dvcmQtaGFzaFwiKTtcbmxldCBtYXJpYWRiID0gcmVxdWlyZShcIm1hcmlhZGJcIik7XG5jbGFzcyBBcHAge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmp3dE9wdGlvbnMgPSB7fTtcbiAgICAgICAgdGhpcy5FeHRyYWN0Snd0ID0gcGFzc3BvcnRKV1QuRXh0cmFjdEp3dDtcbiAgICAgICAgdGhpcy5Kd3RTdHJhdGVneSA9IHBhc3Nwb3J0SldULkV4dHJhY3RKd3Q7XG4gICAgICAgIHRoaXMubmV3ZGF0YSA9IFtdO1xuICAgICAgICB0aGlzLmp3dE9wdGlvbnMuand0RnJvbVJlcXVlc3QgPSB0aGlzLkV4dHJhY3RKd3QuZnJvbUF1dGhIZWFkZXJBc0JlYXJlclRva2VuKCk7XG4gICAgICAgIHRoaXMuand0T3B0aW9ucy5zZWNyZXRPcktleSA9IFwiU0VDUkVUXCI7XG4gICAgICAgIHRoaXMuY29ubmVjdGlvblN0cmluZyA9IHtcbiAgICAgICAgICAgIGhvc3Q6IFwibG9jYWxob3N0XCIsXG4gICAgICAgICAgICB1c2VyOiBcInJvb3RcIixcbiAgICAgICAgICAgIHBhc3N3b3JkOiBcImFkbWluXCIsXG4gICAgICAgICAgICBkYXRhYmFzZTogXCJMT0dJTlwiLFxuICAgICAgICAgICAgY29ubmVjdGlvbkxpbWl0OiA1LFxuICAgICAgICAgICAgcG9ydDogXCIzMzA2XCJcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5wb29sID0gbWFyaWFkYi5jcmVhdGVQb29sKHRoaXMuY29ubmVjdGlvblN0cmluZyk7XG4gICAgICAgIGNvbnNvbGUubG9nKHRoaXMuY29ubmVjdGlvblN0cmluZyk7XG4gICAgICAgIHRoaXMuZXhwcmVzcyA9IGV4cHJlc3MoKTtcbiAgICAgICAgdGhpcy5taWRkbGV3YXJlKCk7XG4gICAgICAgIHRoaXMucm91dGVzKCk7XG4gICAgfVxuICAgIGVuc3VyZVRva2VuKHJlcSwgcmVzLCBuZXh0KSB7XG4gICAgICAgIGNvbnN0IGJlYXJlckhlYWRlciA9IHJlcS5oZWFkZXJzW1wiYXV0aG9yaXphdGlvblwiXTtcbiAgICAgICAgaWYgKHR5cGVvZiBiZWFyZXJIZWFkZXIgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAgIGNvbnN0IGJlYXJlciA9IGJlYXJlckhlYWRlci5zcGxpdChcIiBcIik7XG4gICAgICAgICAgICBjb25zdCBiZWFyZXJUb2tlbiA9IGJlYXJlclsxXTtcbiAgICAgICAgICAgIHJlcS50b2tlbiA9IGJlYXJlclRva2VuO1xuICAgICAgICAgICAgbmV4dCgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmVzLnNlbmRTdGF0dXMoNDAzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBtaWRkbGV3YXJlKCkge1xuICAgICAgICB0aGlzLmV4cHJlc3MudXNlKGZ1bmN0aW9uIChyZXEsIHJlcywgbmV4dCkge1xuICAgICAgICAgICAgcmVzLmhlYWRlcihcIkFjY2Vzcy1Db250cm9sLUFsbG93LU9yaWdpblwiLCBcIipcIik7XG4gICAgICAgICAgICByZXMuaGVhZGVyKFwiQWNjZXNzLUNvbnRyb2wtQWxsb3ctSGVhZGVyc1wiLCBcIlgtUmVxdWVzdGVkLVdpdGgsY29udGVudC10eXBlXCIpO1xuICAgICAgICAgICAgcmVzLmhlYWRlcihcIkFjY2Vzcy1Db250cm9sLUFsbG93LU1ldGhvZHNcIiwgXCJHRVQsIFBPU1QsIE9QVElPTlMsIFBVVCwgUEFUQ0gsIERFTEVURVwiKTtcbiAgICAgICAgICAgIG5leHQoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuZXhwcmVzcy51c2UobG9nZ2VyKFwiZGV2XCIpKTtcbiAgICAgICAgdGhpcy5leHByZXNzLnVzZShib2R5UGFyc2VyLmpzb24oKSk7XG4gICAgICAgIHRoaXMuZXhwcmVzcy51c2UocGFzc3BvcnQuaW5pdGlhbGl6ZSgpKTtcbiAgICAgICAgdGhpcy5leHByZXNzLnVzZShib2R5UGFyc2VyLnVybGVuY29kZWQoeyBleHRlbmRlZDogZmFsc2UgfSkpO1xuICAgIH1cbiAgICByb3V0ZXMoKSB7XG4gICAgICAgIGxldCByb3V0ZXIgPSBleHByZXNzLlJvdXRlcigpO1xuICAgICAgICByb3V0ZXIucG9zdChcIi9sb2dpblwiLCAocmVxLCByZXMsIG5leHQpID0+IHtcbiAgICAgICAgICAgIHRoaXMucG9vbFxuICAgICAgICAgICAgICAgIC5nZXRDb25uZWN0aW9uKClcbiAgICAgICAgICAgICAgICAudGhlbihjb25uID0+IHtcbiAgICAgICAgICAgICAgICBjb25uXG4gICAgICAgICAgICAgICAgICAgIC5xdWVyeShcIlNFTEVDVCAqIEZST00gTE9HSU4ubG9naW4gV0hFUkUgdXNlcm5hbWU9P1wiLCBbXG4gICAgICAgICAgICAgICAgICAgIHJlcS5ib2R5LnVzZXJuYW1lXG4gICAgICAgICAgICAgICAgXSlcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oZGF0YSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNsZWFuUm93cyA9IEFycmF5LmlzQXJyYXkoZGF0YSkgPyBkYXRhLnNsaWNlKDAsIC0xKSA6IGRhdGE7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGNsZWFuUm93cywgXCJkYXRhXCIpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29ubi5lbmQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zdGF0dXMoNDAxKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5qc29uKHsgbWVzc2FnZTogXCJQbGVhc2Ugc2lnbnVwLCBubyBlbWFpbCBleGlzdHNcIiB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChwYXNzd29yZGhhc2gudmVyaWZ5KHJlcS5ib2R5LnBhc3N3b3JkLCBkYXRhWzBdWydwYXNzd29yZCddKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29ubi5lbmQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiU0VDUkVUXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YSA9IHsgZGF0YTogZGF0YSB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzLmpzb24oe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Y2Vzc2Z1bDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b2tlbjogand0LnNpZ24oZGF0YSwgXCJTRUNSRVRcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29ubi5lbmQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zdGF0dXMoNDAxKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5qc29uKHsgbWVzc2FnZTogXCJQYXNzd29yZC9FbWFpbCBkaWQgbm90IG1hdGNoXCIgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAuY2F0Y2goZXJyID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29ubi5lbmQoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBlcnIgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5jYXRjaChlcnIgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBlcnIgfSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICByb3V0ZXIucG9zdChcIi9jcmVhdGVVc2VyXCIsIChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5uZXdkYXRhID0gW107XG4gICAgICAgICAgICB0aGlzLnBvb2xcbiAgICAgICAgICAgICAgICAuZ2V0Q29ubmVjdGlvbigpXG4gICAgICAgICAgICAgICAgLnRoZW4oY29ubiA9PiB7XG4gICAgICAgICAgICAgICAgY29ublxuICAgICAgICAgICAgICAgICAgICAucXVlcnkoXCJpbnNlcnQgaW50byBMT0dJTi5sb2dpbiAobGFzdF9uYW1lLCBmaXJzdF9uYW1lLCBlbWFpbF9hZGRyZXNzLCBwYXNzd29yZCwgdXNlcm5hbWUpIFZBTFVFUyAoPywgPywgPywgPywgPylcIiwgW1xuICAgICAgICAgICAgICAgICAgICByZXEuYm9keS5sYXN0X25hbWUsXG4gICAgICAgICAgICAgICAgICAgIHJlcS5ib2R5LmZpcnN0X25hbWUsXG4gICAgICAgICAgICAgICAgICAgIHJlcS5ib2R5LmVtYWlsX2FkZHJlc3MsXG4gICAgICAgICAgICAgICAgICAgIHBhc3N3b3JkaGFzaC5nZW5lcmF0ZShyZXEuYm9keS5wYXNzd29yZCksXG4gICAgICAgICAgICAgICAgICAgIHJlcS5ib2R5LnVzZXJuYW1lLFxuICAgICAgICAgICAgICAgIF0pXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKGRhdGEgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25uLmVuZCgpO1xuICAgICAgICAgICAgICAgICAgICByZXMuanNvbih7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcInN1Y2Vzc2Z1bFwiXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIC5jYXRjaChlcnIgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25uLmVuZCgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwNCkuanNvbih7IGVyciB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuY2F0Y2goZXJyID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgZXJyIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgcm91dGVyLmdldChcIi9oZWFsdGh6XCIsIChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICAgICAgICAgICAgcmVzLnNlbmQoXCJzdWNjZXNzXCIpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5leHByZXNzLnVzZShcIi9cIiwgcm91dGVyKTtcbiAgICB9XG59XG5leHBvcnRzLmRlZmF1bHQgPSBuZXcgQXBwKCkuZXhwcmVzcztcbiIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcImRlYnVnXCIpOyIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcImh0dHBcIik7IiwiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5jb25zdCBodHRwID0gcmVxdWlyZShcImh0dHBcIik7XG5jb25zdCBkZWJ1ZyA9IHJlcXVpcmUoXCJkZWJ1Z1wiKTtcbmNvbnN0IEFwcF8xID0gcmVxdWlyZShcIi4vQXBwXCIpO1xuZGVidWcoJ3RzLWV4cHJlc3M6c2VydmVyJyk7XG5jb25zdCBwb3J0ID0gbm9ybWFsaXplUG9ydCgzMDA0KTtcbkFwcF8xLmRlZmF1bHQuc2V0KCdwb3J0JywgcG9ydCk7XG5jb25zdCBzZXJ2ZXIgPSBodHRwLmNyZWF0ZVNlcnZlcihBcHBfMS5kZWZhdWx0KTtcbnNlcnZlci5saXN0ZW4ocG9ydCk7XG5zZXJ2ZXIub24oJ2Vycm9yJywgb25FcnJvcik7XG5zZXJ2ZXIub24oJ2xpc3RlbmluZycsIG9uTGlzdGVuaW5nKTtcbmZ1bmN0aW9uIG5vcm1hbGl6ZVBvcnQodmFsKSB7XG4gICAgbGV0IHBvcnQgPSAodHlwZW9mIHZhbCA9PT0gJ3N0cmluZycpID8gcGFyc2VJbnQodmFsLCAxMCkgOiB2YWw7XG4gICAgaWYgKGlzTmFOKHBvcnQpKVxuICAgICAgICByZXR1cm4gdmFsO1xuICAgIGVsc2UgaWYgKHBvcnQgPj0gMClcbiAgICAgICAgcmV0dXJuIHBvcnQ7XG4gICAgZWxzZVxuICAgICAgICByZXR1cm4gZmFsc2U7XG59XG5mdW5jdGlvbiBvbkVycm9yKGVycm9yKSB7XG4gICAgaWYgKGVycm9yLnN5c2NhbGwgIT09ICdsaXN0ZW4nKVxuICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICBsZXQgYmluZCA9ICh0eXBlb2YgcG9ydCA9PT0gJ3N0cmluZycpID8gJ1BpcGUgJyArIHBvcnQgOiAnUG9ydCAnICsgcG9ydDtcbiAgICBzd2l0Y2ggKGVycm9yLmNvZGUpIHtcbiAgICAgICAgY2FzZSAnRUFDQ0VTJzpcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYCR7YmluZH0gcmVxdWlyZXMgZWxldmF0ZWQgcHJpdmlsZWdlc2ApO1xuICAgICAgICAgICAgcHJvY2Vzcy5leGl0KDEpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ0VBRERSSU5VU0UnOlxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihgJHtiaW5kfSBpcyBhbHJlYWR5IGluIHVzZWApO1xuICAgICAgICAgICAgcHJvY2Vzcy5leGl0KDEpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG59XG5mdW5jdGlvbiBvbkxpc3RlbmluZygpIHtcbiAgICBsZXQgYWRkciA9IHNlcnZlci5hZGRyZXNzKCk7XG4gICAgbGV0IGJpbmQgPSAodHlwZW9mIGFkZHIgPT09ICdzdHJpbmcnKSA/IGBwaXBlICR7YWRkcn1gIDogYHBvcnQgJHthZGRyLnBvcnR9YDtcbiAgICBkZWJ1ZyhgTGlzdGVuaW5nIG9uICR7YmluZH1gKTtcbn1cbiIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIkBiYWJlbC9wb2x5ZmlsbFwiKTsiXSwic291cmNlUm9vdCI6IiJ9